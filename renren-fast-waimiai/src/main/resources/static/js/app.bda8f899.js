(function(e){function t(t){for(var r,n,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,n=1;n<o.length;n++){var i=o[n];0!==a[i]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=o[0]))}return e}var r={},n={app:0},a={app:0},s=[];function i(e){return c.p+"js/"+({"customer-setting":"customer-setting","customer-tab-page":"customer-tab-page","delivery-home":"delivery-home","delivery-tab-page":"delivery-tab-page","group-common":"group-common"}[e]||e)+"."+{"customer-setting":"30c67314","customer-tab-page":"5c9053d3","delivery-home":"0e15ecca","delivery-tab-page":"983e3b6b","group-common":"bdc99f24"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={"delivery-home":1,"delivery-tab-page":1};n[e]?t.push(n[e]):0!==n[e]&&o[e]&&t.push(n[e]=new Promise((function(t,o){for(var r="css/"+({"customer-setting":"customer-setting","customer-tab-page":"customer-tab-page","delivery-home":"delivery-home","delivery-tab-page":"delivery-tab-page","group-common":"group-common"}[e]||e)+"."+{"customer-setting":"31d6cfe0","customer-tab-page":"31d6cfe0","delivery-home":"2bda3e2d","delivery-tab-page":"2bda3e2d","group-common":"31d6cfe0"}[e]+".css",a=c.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===a))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===r||u===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete n[e],f.parentNode.removeChild(f),o(s)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){n[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,o){r=a[e]=[t,o]}));t.push(r[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(f);var o=a[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,o[1](d)}a[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(o,r,function(t){return e[t]}.bind(null,r));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=u;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";o("85ec")},"089c":function(e,t){},2243:function(e,t,o){"use strict";o.r(t);o("99af"),o("4160"),o("d3b7"),o("159b"),o("ddb0");var r=o("c1f7"),n=[];r.keys().forEach((function(e){"./index.js"!==e&&(n=n.concat(r(e).default))})),t["default"]=n},"24b1":function(e,t,o){"use strict";o.r(t);o("99af"),o("4160"),o("d3b7"),o("159b"),o("ddb0");var r=o("be4a"),n=[];r.keys().forEach((function(e){"./index.js"!==e&&(n=n.concat(r(e).default))})),t["default"]=n},"264d":function(e,t){},"2f7b":function(e,t,o){},"3ccd":function(e,t){},"4ec9":function(e,t,o){"use strict";o("a9d5")},"56d7":function(e,t,o){"use strict";o.r(t),o.d(t,"Vue",(function(){return a["a"]}));o("e260"),o("e6cf"),o("cca6"),o("a79d");var r,n,a=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("keep-alive",[e.$route.meta.keepAlive?o("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():o("router-view")],1)},i=[],c=o("5530"),l=o("53ca"),u=o("2f62"),d=o("d399"),f={name:"App",created:function(){var e=window.localStorage.getItem("uid");console.log("userId=====>value:"+e+"   ==>type:  "+Object(l["a"])(e)),null===e||"number"!==typeof e&&"string"!==typeof e?Object(d["a"])("未登录"):(console.log("logging into action==>1"),this.getUserInfo(e))},methods:Object(c["a"])({},Object(u["b"])("validate",{getUserInfo:"getUserInfo"})),computed:Object(c["a"])({},Object(u["c"])("validate",{userInfo:"userInfo"}))},p=f,m=(o("034f"),o("2877")),h=Object(m["a"])(p,s,i,!1,null,null,null),v=h.exports,g={module:"customer",name:"顾客端模块",homePageShopResult:[],searchPageShopResult:[],shopById:{},shopFoodsResult:[],cartList:[],cartListByShopId:[],updateFlag:0,shopCartTotalPrice:{sellPrice:0,originalPrice:""},userAddressList:[],userAddressSelected:{},commitFoodList:[],ordersByUserId:[]},b=(o("4de4"),o("13d5"),o("b0c0"),o("ade3")),y="SET_MODULE",S="SET_NAME",_="SET_HOME_PAGE_SHOP_LIST",O="SET_SEARCH_PAGE_SHOP_LIST",I="SET_SHOP_BY_ID_RESULT",L="SET_SHOP_FOODS_LIST",x="SET_CART_LIST",j="SET_SHOP_CART_LIST_BY_SHOP_ID",w="CHANGE_CART_UPDATE_FLAG",P="PLUS_CART_ITEM",k="MINUS_CART_ITEM",C="SET_SHOP_CART_LIST_NULL",T="CALCULATE_TOTAL_COST",A="CLEAR_TOTAL_COST",R="SET_USER_ADDRESS_LIST",E="SET_ADDRESS_SELECTED",F="SET_COMMIT_FOOD_LIST",D="SET_ORDER_LIST",U=o("ed02"),$=(r={},Object(b["a"])(r,y,(function(e,t){e.module=t})),Object(b["a"])(r,S,(function(e,t){e.name=t})),Object(b["a"])(r,_,(function(e,t){e.homePageShopResult=t})),Object(b["a"])(r,O,(function(e,t){e.searchPageShopResult=t})),Object(b["a"])(r,I,(function(e,t){e.shopById=t})),Object(b["a"])(r,L,(function(e,t){e.shopFoodsResult=t})),Object(b["a"])(r,w,(function(e){e.updateFlag++})),Object(b["a"])(r,x,(function(e,t){e.cartList=t})),Object(b["a"])(r,j,(function(e,t){var o=e.cartList.filter((function(e){return e.shopId===t}));o.length>0&&(e.cartListByShopId=o[0].cart.filter((function(e){return e.numbers>0}))),e.updateFlag++})),Object(b["a"])(r,C,(function(e){e.cartListByShopId=[]})),Object(b["a"])(r,P,(function(e,t){for(var o=0;o<e.cartList.length;o++)if(e.cartList[o].shopId==t.shopId){for(var r=0;r<e.cartList[o].cart.length;r++)if(e.cartList[o].cart[r].id==t.foodId){e.cartList[o].cart[r].numbers++,e.updateFlag++;break}break}})),Object(b["a"])(r,k,(function(e,t){for(var o=0;o<e.cartList.length;o++)if(e.cartList[o].shopId==t.shopId){for(var r=0;r<e.cartList[o].cart.length;r++)if(e.cartList[o].cart[r].id==t.foodId){e.cartList[o].cart[r].numbers--,e.updateFlag++;break}break}})),Object(b["a"])(r,T,(function(e){var t=0,o=0;t=e.cartListByShopId.reduce((function(e,t){var o={sellPrice:0};return o.sellPrice=e.sellPrice+t.sellPrice*t.numbers,o}),{sellPrice:0,numbers:0}),o=e.cartListByShopId.reduce((function(e,t){var o={originPrice:0};return o.originPrice=e.originPrice+t.originPrice*t.numbers,o}),{originPrice:0,numbers:0}),t=t.sellPrice,o=o.originPrice,"number"!==typeof t&&(t=0),"number"!==typeof o&&(o=0);var r=Object(U["a"])(o);e.shopCartTotalPrice={sellPrice:100*t,originalPrice:"0.00"===r?"":r}})),Object(b["a"])(r,A,(function(e){e.shopCartTotalPrice={sellPrice:0,originalPrice:""}})),Object(b["a"])(r,R,(function(e,t){e.userAddressList=t})),Object(b["a"])(r,E,(function(e,t){e.userAddressSelected=t})),Object(b["a"])(r,F,(function(e,t){e.commitFoodList=t})),Object(b["a"])(r,D,(function(e,t){e.ordersByUserId=t})),r),B=o("2909"),q={module:function(e){return e.module},name:function(e){return e.name},homePageShopResult:function(e){return e.homePageShopResult},searchPageShopResult:function(e){return e.searchPageShopResult},shopById:function(e){return e.shopById},shopFoodsResult:function(e){return e.shopFoodsResult},cartList:function(e){return e.cartList},getCartListByShopId:function(e){return e.cartListByShopId},updateFlag:function(e){return e.updateFlag},shopCartTotalPrice:function(e){return e.shopCartTotalPrice},userAddressList:function(e){return e.userAddressList},userAddressSelected:function(e){return e.userAddressSelected},commitFoodList:function(e){return e.commitFoodList},ordersByUserId:function(e){return e.ordersByUserId},sortByTimeOrderList:function(e){var t=Object(B["a"])(e.ordersByUserId);return t.sort((function(e,t){return t.id-e.id})),t}},M=o("f564"),H={setModuleInfo:function(e,t){var o=e.commit;o(y,t.module),o(S,t.name)},requestHomePageShopList:function(e){var t=e.commit;a["a"].axios.get("/shop/list").then((function(e){t(_,e.data.list)})).catch((function(e){Object(M["a"])({type:"warning",message:"请求错误"+e})}))},requestSearchPageShopList:function(e,t){var o=e.commit;a["a"].axios.get("/shop/query",{params:t}).then((function(e){o(O,e.data.list)}))},requestShopById:function(e,t){var o=e.commit;a["a"].axios.get("/shopinfo/info/"+t).then((function(e){o(I,e.data.shopInfo)}))},requestShopFoodsResult:function(e,t){var o=e.commit;a["a"].axios.get("/food/shop/"+t).then((function(e){o(L,e.data.list)}))},requestUserAddressList:function(e,t){var o=e.commit;a["a"].axios.get("/useraddress/"+t).then((function(e){o(R,e.data.list)}))},requestUserOrderCommit:function(){},getOrdersByUserId:function(e,t){var o=e.commit;a["a"].axios.get("/order/consumer-list/"+t).then((function(e){o(D,e.data.list)})).catch((function(){return Object(d["a"])("请刷新订单页")}))}},z={namespaced:!0,state:g,getters:q,mutations:$,actions:H},N=o("3ccd"),G=o.n(N),V=o("089c"),Y=o.n(V),K=o("db03"),Q=o.n(K),W=o("264d"),J=o.n(W),X={namespaced:!0,state:G.a,getters:Q.a,mutations:Y.a,actions:J.a},Z={module:"validate",name:"鉴定权限模块",userInfo:{}},ee="SET_MODULE",te="SET_NAME",oe="SET_USER_INFO",re=(n={},Object(b["a"])(n,ee,(function(e,t){e.module=t})),Object(b["a"])(n,te,(function(e,t){e.name=t})),Object(b["a"])(n,oe,(function(e,t){e.userInfo=t})),n),ne={module:function(e){return e.module},name:function(e){return e.name},userInfo:function(e){return e.userInfo}},ae=o("4328"),se=o.n(ae),ie={setModuleInfo:function(e,t){var o=e.commit;o(ee,t.module),o(te,t.name)},setUserInfo:function(e,t){var o=e.commit;o(oe,t)},userLogin:function(e,t){var o=e.commit;a["a"].axios({method:"post",url:"/user/login",data:se.a.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){var t=e.data;if(300!==t.code)return o(oe,t.user),window.localStorage.setItem("uid",t.user.id),void Object(M["a"])({message:"登录成功",type:"primary"});Object(M["a"])({message:t.msg,type:"warning"})})).catch((function(){}))},getUserInfo:function(e,t){var o=e.commit;a["a"].axios.get("/user/info/"+t).then((function(e){var t=e.data;if(null!==t.user&&402!==t.code&&403!==t.code&&300!==t.code)return o(oe,t.user),void Object(M["a"])({message:"欢迎回来",color:"#ad0000",background:"#ffe1e1"});Object(M["a"])({message:"登录状态已失效，请重新登录",type:"warning"})})).catch((function(){}))}},ce={namespaced:!0,state:Z,getters:ne,mutations:re,actions:ie},le=o("b054"),ue=o.n(le);a["a"].use(u["a"]);var de=!1,fe=new u["a"].Store({modules:{customer:z,deliveryman:X,validate:ce},strict:de,plugins:de?[ue()()]:[]}),pe=(o("caad"),o("c975"),o("45fc"),o("a434"),o("2532"),o("99af"),o("8c4f")),me=o("6bae"),he=(o("d3b7"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#fff6ef"},attrs:{title:"登录","left-arrow":"","right-text":"注册"},on:{"click-left":function(t){return e.$router.push("/")},"click-right":function(t){return e.$router.push("/register")}}}),o("van-form",{on:{submit:e.loginAndBackToPrevPage}},[o("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),o("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("van-field",{attrs:{name:"checkbox",label:"自动登录"},scopedSlots:e._u([{key:"input",fn:function(){return[o("van-checkbox",{attrs:{shape:"square"},model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}})]},proxy:!0}])}),o("div",{staticStyle:{margin:"16px"}},[o("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 登录 ")])],1)],1)],1)}),ve=[],ge={name:"Login",data:function(){return{username:"",password:"",rememberMe:!0}},methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])("validate",{userLogin:"userLogin"})),{},{loginAndBackToPrevPage:function(){this.userLogin({username:this.username,password:this.password,"remember-me":this.rememberMe}),this.$router.go(-1)}})},be=ge,ye=Object(m["a"])(be,he,ve,!1,null,"6d15315c",null),Se=ye.exports,_e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#fff6ef"},attrs:{title:"注册","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}}),o("van-form",{on:{submit:e.registerUser}},[o("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),o("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("van-field",{attrs:{type:"password",name:"确认密码",label:"确认密码",placeholder:"确认密码",rules:[{required:!0,message:"请确认密码"},{validator:e.rePasswordValidate,message:"两次输入密码不一致"}]},model:{value:e.rePassword,callback:function(t){e.rePassword=t},expression:"rePassword"}}),o("van-collapse",{model:{value:e.enhance,callback:function(t){e.enhance=t},expression:"enhance"}},[o("van-collapse-item",{attrs:{title:"高级选项/骑手/商家注册",name:"enhanceActive"}},[o("van-tabs",{attrs:{color:"#ff8000"},model:{value:e.identity,callback:function(t){e.identity=t},expression:"identity"}},[o("van-tab",{attrs:{name:0,title:"顾客"}},[o("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),o("van-field",{attrs:{name:"性别",label:"性别"},scopedSlots:e._u([{key:"input",fn:function(){return[o("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[o("van-radio",{attrs:{"checked-color":"#ff9933",name:"男"}},[e._v("男")]),o("van-radio",{attrs:{"checked-color":"#ff9933",name:"女"}},[e._v("女")])],1)]},proxy:!0}])}),o("van-field",{attrs:{name:"真实姓名",label:"真实姓名",placeholder:"真实姓名"},model:{value:e.truename,callback:function(t){e.truename=t},expression:"truename"}})],1),o("van-tab",{attrs:{name:1,title:"骑手"}},[o("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称",rules:[{validator:e.userNameValidate,message:"请填写昵称"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),o("van-field",{attrs:{name:"性别",label:"性别",rules:[{validator:e.genderValidate,message:"请选择性别"}]},scopedSlots:e._u([{key:"input",fn:function(){return[o("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[o("van-radio",{attrs:{"checked-color":"#ff9933",name:"男"}},[e._v("男")]),o("van-radio",{attrs:{"checked-color":"#ff9933",name:"女"}},[e._v("女")])],1)]},proxy:!0}])}),o("van-field",{attrs:{name:"真实姓名",label:"真实姓名",placeholder:"真实姓名",rules:[{validator:e.trueNameValidate,message:"请填写真实姓名"}]},model:{value:e.truename,callback:function(t){e.truename=t},expression:"truename"}})],1),o("van-tab",{attrs:{name:2,title:"商家"}},[o("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称",rules:[{validator:e.userNameValidate,message:"请填写昵称"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),o("van-field",{attrs:{name:"性别",label:"性别",rules:[{validator:e.genderValidate,message:"请选择性别"}]},scopedSlots:e._u([{key:"input",fn:function(){return[o("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}},[o("van-radio",{attrs:{"checked-color":"#ff9933",name:"男"}},[e._v("男")]),o("van-radio",{attrs:{"checked-color":"#ff9933",name:"女"}},[e._v("女")])],1)]},proxy:!0}])}),o("van-field",{attrs:{name:"真实姓名",label:"真实姓名",placeholder:"真实姓名",rules:[{validator:e.trueNameValidate,message:"请填写真实姓名"}]},model:{value:e.truename,callback:function(t){e.truename=t},expression:"truename"}})],1)],1)],1)],1),o("div",{staticStyle:{margin:"16px"}},[o("van-button",{attrs:{round:"",block:"","native-type":"submit",color:"#ff9933"}},[e._v(" 注册 ")])],1)],1)],1)},Oe=[],Ie={name:"Register",data:function(){return{mobile:"",password:"",rePassword:"",rememberMe:!0,identity:0,enhance:[],username:"",truename:"",gender:null}},methods:{rePasswordValidate:function(){return this.rePassword===this.password},userNameValidate:function(){return 0===this.identity||""!==this.username},genderValidate:function(){return 0===this.identity||null!==this.gender},trueNameValidate:function(){return 0===this.identity||""!==this.truename},registerUser:function(){var e=this,t={username:this.username,mobile:this.mobile,password:this.password,truename:this.truename,gender:this.gender,identity:this.identity};this.axios({method:"post",url:"/user/register",data:t,headers:{"content-type":"application/json"}}).then((function(o){0===o.data.code?(Object(d["a"])({message:"注册成功",type:"success"}),1!==t.identity&&2!==t.identity||setTimeout((function(){return e.toastPreRegister()}),1e3)):Object(d["a"])({message:"注册失败",type:"fail"})})).catch((function(){return Object(d["a"])({message:"注册失败",type:"fail"})}))},toastPreRegister:function(){Object(d["a"])({message:"当前申请用户角色待审核",type:"success"})}}},Le=Ie,xe=Object(m["a"])(Le,_e,Oe,!1,null,null,null),je=xe.exports,we=[{path:"/login",name:"Login Page",component:Se},{path:"/register",name:"Register Page",component:je},{path:"/nopermission",name:"No Permission Page",title:"无权限页面",component:function(){return o.e("group-common").then(o.bind(null,"a9d0"))}},{path:"*",name:"NO FOUND",title:"404",component:function(){return o.e("group-common").then(o.bind(null,"4b90"))}}];a["a"].use(pe["a"]);var Pe=new pe["a"]({scrollBehavior:function(e,t,o){return o||{x:0,y:0}},routes:[].concat(Object(B["a"])(we),Object(B["a"])(me["default"]))}),ke=Pe,Ce=o("323e"),Te=o.n(Ce);o("a5d8");Te.a.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3});var Ae=function(e){var t=window.__axiosPromiseArr;if(t&&t.length){var o=t.length;while(o--)t[o].cancel("cancel"),t.splice(o,1)}e()};ke.beforeEach((function(e,t,o){Te.a.start(),e.matched.some((function(e){return e.meta.requiresAuth}))?sessionStorage.getItem("token")?Ae(o):o({path:"/nopermission",query:{redirect:e.fullPath}}):Ae(o);var r=window.localStorage.getItem("uid"),n=["/mine","/order","/setting"];n.indexOf(e.fullPath)>=0&&(console.log("into validated path===>uid==>"+r),r||(console.log("invalid user"),Object(d["a"])({message:"请登录"}),o("/login")),console.log("valid user")),!r&&e.fullPath.includes("/pre-order")?(Object(d["a"])({message:"请登录"}),t.meta.keepAlive=!0,o("/login")):e.fullPath.includes("/pre-order")&&(t.meta.keepAlive=!0),console.log(fe.getters["validate/userInfo"]),e.fullPath.includes("/deliveryman")&&(console.log('store.getters["validate/userInfo"].identity !== 1======>'+fe.getters["validate/userInfo"].identity!==1),r&&1===fe.getters["validate/userInfo"].identity||(Object(d["a"])({message:"当前用户非骑手，请切换帐号登录",type:"fail"}),o("/login"))),console.log("normal control"),o()})),ke.afterEach((function(e){Te.a.done(),document.title=e.name||""}));var Re=ke,Ee=o("b970"),Fe=(o("157a"),o("f0e6"),o("bc3a")),De=o.n(Fe),Ue=o("2106"),$e=o.n(Ue),Be=o("343b");De.a.defaults.timeout=1e4,De.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",De.a.defaults.baseURL="/waimai/",a["a"].use($e.a,De.a),a["a"].use(Ee["a"]),a["a"].use(Be["a"]),a["a"].config.productionTip=!1,new a["a"]({store:fe,router:Re,render:function(e){return e(v)}}).$mount("#app")},"6bae":function(e,t,o){"use strict";o.r(t);o("99af"),o("4160"),o("d3b7"),o("159b"),o("ddb0");var r=o("d56b"),n=[];r.keys().forEach((function(e){"./index.js"!==e&&(n=n.concat(r(e).default))})),t["default"]=n},"6d9e":function(e,t,o){"use strict";o("f9e9")},"7b25":function(e,t,o){"use strict";o("dcfe")},8499:function(e,t,o){"use strict";o("2f7b")},"85ec":function(e,t,o){},"87bc":function(e,t,o){"use strict";o.r(t);o("d3b7");var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("keep-alive",[e.$route.meta.keepAlive?o("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():o("router-view"),o("van-tabbar",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[o("van-tabbar-item",{attrs:{replace:"",to:"/",icon:"home-o"}},[e._v("主页")]),o("van-tabbar-item",{attrs:{replace:"",to:"/order",icon:"orders-o"}},[e._v("订单")]),o("van-tabbar-item",{attrs:{replace:"",to:"/mine",icon:"user-o"}},[e._v("我的")])],1)],1)},n=[],a={name:"Main",data:function(){return{active:0}},beforeRouteEnter:function(e,t,o){console.log("beforeRouteUpdate"),console.log("beforeRouteUpdate==>from===>"+t.fullPath),"/login"===t.fullPath&&(console.log("into beforeRouteUpdate"),o((function(t){"/mine"===e.fullPath?t.active=2:"/order"===e.fullPath?t.active=1:t.active=0}))),o()}},s=a,i=o("2877"),c=Object(i["a"])(s,r,n,!1,null,"0440cb3c",null),l=c.exports,u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#8a91ff"},scopedSlots:e._u([{key:"left",fn:function(){return[o("van-icon",{attrs:{name:"wap-nav",size:"18",color:"#ffffff"},on:{click:function(t){e.showLeftMenu=!0}}})]},proxy:!0},{key:"title",fn:function(){return[o("van-search",{attrs:{shape:"round",background:"#8a91ff",placeholder:"店铺名或菜品名"},on:{focus:e.goSearchPage},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]},proxy:!0},{key:"right",fn:function(){return[o("van-icon",{staticStyle:{"margin-left":"20px"},attrs:{name:"plus",size:"18",color:"#ffffff"},on:{click:function(t){e.showPlusMenu=!0}}})]},proxy:!0}])}),o("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,height:"200px","indicator-color":"white"}},e._l(e.swipePromoteList,(function(t){return o("van-swipe-item",{key:t.id,on:{click:function(o){e.$router.push({path:"/shop/"+t.shopId,query:{shopname:e.getShop(t.shopId).shopname}})}}},[o("van-image",{attrs:{fit:"cover",height:"200px",width:"100%","lazy-load":"",src:e.getShop(t.shopId).logoImg}}),o("span",{staticClass:"custom-indicator"},[e._v(" "+e._s(e.getShop(t.shopId).shopname)+" ")])],1)})),1),o("ShopCategoriesGrid"),o("HomeShopList"),o("van-popup",{style:{height:"100%",width:"50%"},attrs:{position:"left",closeable:""},model:{value:e.showLeftMenu,callback:function(t){e.showLeftMenu=t},expression:"showLeftMenu"}},[o("div",{staticStyle:{height:"100%"}},[o("van-cell-group",{attrs:{title:"骑手服务"}},[o("van-cell",{attrs:{title:"骑手专区",to:"/deliveryman","is-link":""}})],1),o("van-cell-group",{attrs:{title:"商家服务"}},[o("van-cell",{attrs:{title:"商家专区","is-link":""},on:{click:e.toShopownerPage}})],1)],1)]),o("van-popup",{style:{height:"100%",width:"50%"},attrs:{position:"right",closeable:""},model:{value:e.showPlusMenu,callback:function(t){e.showPlusMenu=t},expression:"showPlusMenu"}},[o("div",{staticStyle:{height:"100%"}},[o("UserInfoCard",{staticStyle:{"margin-top":"50px"},attrs:{"user-info":e.userInfo}}),e.userInfo.id?e._e():o("span",[e._v("未登录状态")]),o("van-cell-group",[o("van-cell",{attrs:{title:"登录","is-link":"",to:"/login"}}),o("van-cell",{attrs:{title:"取消登录","is-link":""},on:{click:e.logout}})],1)],1)])],1)},d=[],f=(o("4de4"),o("5530")),p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[o("van-list",{staticStyle:{"margin-bottom":"20%"}},[o("van-cell-group",{attrs:{title:"tips:下拉可手动刷新"}},e._l(e.queryedShopList,(function(e){return o("ShopListItem",{key:e.id,attrs:{shop:e}})})),1)],1)],1)},m=[],h=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-cell",{attrs:{to:{path:"/shop/"+e.shop.id,query:{shopname:e.shop.shopname}},"is-link":""},scopedSlots:e._u([{key:"title",fn:function(){return[o("van-row",{attrs:{gutter:"20"}},[o("van-col",[o("van-image",{attrs:{"lazy-load":"",width:"60",height:"60",fit:"cover",src:e.shop.logoImg}})],1),o("van-col",[o("div",[o("span",[e._v(e._s(e.shop.shopname))]),o("van-row",[o("van-col",[o("van-rate",{attrs:{color:"#9c95fb","allow-half":"",size:"small"},model:{value:e.shop.score,callback:function(t){e.$set(e.shop,"score",t)},expression:"shop.score"}})],1),o("van-col",[o("span",[e._v(e._s(e.shop.score))])])],1),o("span",[e._v("起送: ￥"+e._s(e.shop.floorSendCost))]),o("van-row",[1===e.shop.showStatus?o("van-tag",{attrs:{color:"green"}},[e._v("营业中")]):e._e(),0===e.shop.showStatus?o("van-tag",{attrs:{color:"grey"}},[e._v("休息中")]):e._e()],1)],1)])],1)]},proxy:!0}])})],1)},v=[],g={name:"ShopListItem",props:["shop"]},b=g,y=Object(i["a"])(b,h,v,!1,null,null,null),S=y.exports,_=o("2f62"),O={name:"HomeShopList",components:{ShopListItem:S},props:{},data:function(){return{isLoading:!1,queryedShopList:[],exampleData:{id:1,shopownerId:2,shopname:"正信鸡排",contactMan:"张小蕊",contactMobile:"18752151002",cateid:2,beginTime:"08:30:00",endTime:"23:20:00",logoImg:"1156a",address:"迎龙路01号",mobile:"18152554901",notice:"可送，等你",score:4.8,sendTime:"20",boxCost:2,sendCost:1,floorSendCost:1,showStatus:1}}},computed:Object(f["a"])({},Object(_["c"])("customer",{homePageResult:"homePageShopResult"})),watch:{homePageResult:function(){this.queryedShopList=this.homePageResult}},methods:Object(f["a"])(Object(f["a"])({},Object(_["b"])("customer",["requestHomePageShopList"])),{},{onRefresh:function(){var e=this;setTimeout((function(){e.requestHomePageShopList(),e.isLoading=!1}),1e3)}}),mounted:function(){this.requestHomePageShopList()}},I=O,L=Object(i["a"])(I,p,m,!1,null,null,null),x=L.exports,j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-grid",[o("van-grid-item",{attrs:{text:"饮品",to:{path:"/category",query:{cateId:1}}}},[o("van-image",{attrs:{"lazy-load":"",width:"60",height:"60",fit:"cover",round:"",src:"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3525007079,3194907489&fm=26&gp=0.jpg"}}),o("span",{staticStyle:{"font-size":"12px"}},[e._v("饮品")])],1),o("van-grid-item",{attrs:{text:"简餐",to:{path:"/category",query:{cateId:2}}}},[o("van-image",{attrs:{"lazy-load":"",width:"60",height:"60",fit:"cover",round:"",src:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2705377172,1246204023&fm=26&gp=0.jpg"}}),o("span",{staticStyle:{"font-size":"12px"}},[e._v("简餐")])],1),o("van-grid-item",{attrs:{text:"商超",to:{path:"/category",query:{cateId:3}}}},[o("van-image",{attrs:{"lazy-load":"",width:"60",height:"60",fit:"cover",round:"",src:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=215524058,3910018350&fm=26&gp=0.jpg"}}),o("span",{staticStyle:{"font-size":"12px"}},[e._v("商超")])],1),o("van-grid-item",{attrs:{text:"果蔬",to:{path:"/category",query:{cateId:4}}}},[o("van-image",{attrs:{"lazy-load":"",width:"60",height:"60",fit:"cover",round:"",src:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3517678817,113111947&fm=26&gp=0.jpg"}}),o("span",{staticStyle:{"font-size":"12px"}},[e._v("果蔬")])],1)],1)},w=[],P={name:"ShopCategoriesGrid"},k=P,C=Object(i["a"])(k,j,w,!1,null,null,null),T=C.exports,A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-card",{scopedSlots:e._u([{key:"title",fn:function(){return[o("van-row",{attrs:{gutter:"20"}},[o("van-col",[o("van-image",{attrs:{round:"",cover:"","lazy-load":"",width:60,height:60,src:"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3050508999,1465904396&fm=26&gp=0.jpg"}})],1),o("van-col",[o("van-row",[o("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.userInfo.username))])]),o("van-row",[o("span",{staticStyle:{color:"grey"}},[e._v("uid: "+e._s(e.userInfo.id))])])],1)],1)]},proxy:!0}])})},R=[],E={name:"UserInfoCard",props:{userInfo:{}}},F=E,D=Object(i["a"])(F,A,R,!1,null,null,null),U=D.exports,$=o("2241"),B={name:"Home",components:{ShopCategoriesGrid:T,HomeShopList:x,UserInfoCard:U},data:function(){return{value:"",count:0,showPlusMenu:!1,showLeftMenu:!1,swipePromoteList:[],current:{shopId:-99}}},methods:{goSearchPage:function(){this.$router.push("/search")},logout:function(){$["a"].confirm({title:"退出登录",message:"确定退出登录"}).then((function(){window.localStorage.removeItem("uid")})).catch((function(){})),this.showPlusMenu=!1},toShopownerPage:function(){window.open("http://47.103.192.205:10000/shopowner/index.html")},apiRequestPromoteList:function(){var e=this;this.axios.get("/promote/list").then((function(t){e.swipePromoteList=t.data.list}))},getShop:function(e){return this.homePageShopResult.filter((function(t){return t.id===e}))[0]}},computed:Object(f["a"])(Object(f["a"])({},Object(_["c"])("validate",{userInfo:"userInfo"})),Object(_["c"])("customer",{homePageShopResult:"homePageShopResult"})),mounted:function(){this.apiRequestPromoteList()}},q=B,M=(o("8499"),Object(i["a"])(q,u,d,!1,null,"2ace3338",null)),H=M.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-search",{attrs:{shape:"round",background:"#66CCFF",placeholder:"请输入搜索关键词",clearable:"","show-action":""},on:{search:e.onSearch},scopedSlots:e._u([{key:"left",fn:function(){return[o("van-icon",{staticStyle:{"margin-right":"15px"},attrs:{name:"arrow-left",size:"20"},on:{click:function(t){return e.$router.go(-1)}}})]},proxy:!0},{key:"action",fn:function(){return[o("div",{on:{click:e.onSearch}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.shopname,callback:function(t){e.shopname=t},expression:"shopname"}}),o("ShopList",{ref:"shopList"})],1)},N=[],G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[o("van-list",[o("van-cell-group",{attrs:{title:"tips:下拉可手动刷新"}},e._l(e.queryedShopList,(function(e){return o("ShopListItem",{key:e.id,attrs:{shop:e}})})),1)],1)],1)},V=[],Y={name:"ShopList",components:{ShopListItem:S},props:{},data:function(){return{isLoading:!1,queryedShopList:[],exampleData:{id:1,shopownerId:2,shopname:"正信鸡排",contactMan:"张小蕊",contactMobile:"18752151002",cateid:2,beginTime:"08:30:00",endTime:"23:20:00",logoImg:"1156a",address:"迎龙路01号",mobile:"18152554901",notice:"可送，等你",score:4.8,sendTime:"20",boxCost:2,sendCost:1,floorSendCost:1,showStatus:1}}},computed:Object(f["a"])({},Object(_["c"])("customer",{searchPageResult:"searchPageShopResult"})),watch:{searchPageResult:function(){this.queryedShopList=this.searchPageResult}},methods:Object(f["a"])(Object(f["a"])({},Object(_["b"])("customer",["requestSearchPageShopList"])),{},{onRefresh:function(e){var t=this;setTimeout((function(){t.requestSearchPageShopList(e),t.isLoading=!1}),1e3)}}),mounted:function(){}},K=Y,Q=Object(i["a"])(K,G,V,!1,null,null,null),W=Q.exports,J={name:"Search",components:{ShopList:W},data:function(){return{shopname:null}},methods:{onSearch:function(){this.$refs.shopList.onRefresh({shopname:this.shopname,cateId:0})}}},X=J,Z=Object(i["a"])(X,z,N,!1,null,"27c7002a",null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#fff6ef"},attrs:{title:"我的"},scopedSlots:e._u([{key:"right",fn:function(){return[o("van-icon",{attrs:{name:"setting-o",size:"25"},on:{click:function(t){return e.$router.push("/setting")}}})]},proxy:!0}])}),o("UserInfoCard",{attrs:{"user-info":e.userInfo}}),o("van-grid",[o("van-grid-item",{attrs:{icon:"star-o",to:"/mine/shop-star",text:"店铺收藏"}}),o("van-grid-item",{attrs:{icon:"location-o",to:"/mine/location",text:"地址管理"}}),o("van-grid-item",{attrs:{icon:"balance-pay",text:"钱包"}}),o("van-grid-item",{attrs:{icon:"service-o",text:"客服"}})],1),o("van-cell-group",{attrs:{title:"骑手服务"}},[o("van-cell",{attrs:{title:"骑手专区",to:"/deliveryman","is-link":""}})],1),o("van-cell-group",{attrs:{title:"商家服务"}},[o("van-cell",{attrs:{title:"商家专区","is-link":""},on:{click:e.toShopownerPage}})],1)],1)},oe=[],re={name:"Mine",components:{UserInfoCard:U},computed:Object(f["a"])({},Object(_["c"])("validate",{userInfo:"userInfo"})),methods:{toShopownerPage:function(){window.open("http://47.103.192.205:10000/shopowner/index.html")}}},ne=re,ae=Object(i["a"])(ne,te,oe,!1,null,null,null),se=ae.exports,ie=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#fff6ef"},attrs:{title:"订单"}}),o("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[o("van-list",{staticStyle:{"margin-bottom":"20%"}},[o("van-cell-group",{attrs:{title:"tips:下拉可手动刷新"}},e._l(e.sortByTimeOrderList,(function(t){return o("OrderItem",{key:t.id,attrs:{"child-refresh":e.onRefresh,removeItemFromParent:e.removeItemFromParent,order:t}})})),1)],1)],1)],1)},ce=[],le=(o("a434"),o("2909")),ue=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-cell",{staticStyle:{background:"#EFF0F1"}},[o("van-card",{attrs:{price:e.totalPrice(e.order.totalMoney),title:e.order.shopShopname},scopedSlots:e._u([{key:"tags",fn:function(){return e._l(e.orderFoods,(function(t){return o("van-cell",{key:t.id},[o("van-card",{attrs:{price:e.totalPrice(t.sellPrice,t.numbers),"origin-price":e.totalPrice(t.originPrice,t.numbers),title:t.title+"  x"+t.numbers,thumb:t.cover}})],1)}))},proxy:!0},{key:"footer",fn:function(){return["商家已接单"===e.order.completestatus?o("van-button",{attrs:{color:"#ff3333",size:"small"},on:{click:function(t){e.abortDialog=!0}}},[e._v("取消订单 ")]):e._e(),"配送中"===e.order.completestatus||"已完成"===e.order.completestatus||"申请退款中"===e.order.completestatus?o("van-button",{attrs:{color:"#ff3333",disabled:"申请退款中"===e.order.completestatus,size:"small"},on:{click:function(t){e.refundDialog=!0}}},[e._v("退款申请 ")]):e._e(),"配送中"===e.order.completestatus?o("van-button",{attrs:{color:"#ff8000",size:"small"},on:{click:e.preDeliverSent}},[e._v("收货 ")]):e._e()]},proxy:!0},{key:"price-top",fn:function(){return[o("span",[e._v(e._s(e.modifiedTime(new Date(e.order.gmtCreate))))]),o("br"),o("span",[e._v(e._s(e.getDate(new Date(e.order.gmtCreate))))]),o("br"),o("span",[e._v("状态："+e._s(e.order.completestatus))]),o("br"),o("span",[e._v("合计：")])]},proxy:!0}])}),o("van-dialog",{attrs:{title:"退款申请","show-cancel-button":""},on:{confirm:e.sendRefund},model:{value:e.refundDialog,callback:function(t){e.refundDialog=t},expression:"refundDialog"}},[o("van-field",{attrs:{placeholder:"退款理由往这里填",autofocus:"",label:"退款理由",type:"textarea",maxlength:"50","show-word-limit":""},model:{value:e.refundReason,callback:function(t){e.refundReason=t},expression:"refundReason"}})],1),o("van-dialog",{attrs:{title:"确定撤单","show-cancel-button":""},on:{confirm:e.abortOrderStatus},model:{value:e.abortDialog,callback:function(t){e.abortDialog=t},expression:"abortDialog"}})],1)},de=[],fe=o("ed02"),pe=o("d399"),me={name:"OrderItem",props:["order","removeItemFromParent","childRefresh"],computed:{},watch:{updateFlag:function(){this.$forceUpdate()}},methods:{totalPrice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(fe["a"])(e*t)},apiRequestFoods:function(e){var t=this;this.axios.get("/orderfood/"+e).then((function(e){t.orderFoods=e.data.list}))},modifiedTime:function(e){return Object(fe["b"])("HH:MM",e)},getDate:function(e){return Object(fe["b"])("mm月dd日",e)},deliverSent:function(e){this.axios.get("/deliver/complete/"+e).then((function(e){0===e.data.code&&Object(pe["a"])({message:"订单已完成",type:"success"})})).catch((function(){Object(pe["a"])({message:"未知问题，请重试",type:"fail"})}))},preDeliverSent:function(){var e=this;$["a"].confirm({title:"订单送达",message:"确认货品到手上才按收货哦",confirmButtonText:"收货"}).then((function(){e.deliverSent(e.order.id)})).catch((function(){}))},apiChangeOrderStatus:function(){var e={orderId:this.order.id,userId:this.order.userId,username:this.order.userUsername,refundReason:this.refundReason,serviceCost:.1,completestatus:0};this.axios({url:"/orderdetail/refund/"+this.order.id,method:"put",data:e,headers:{"content-type":"application/json"}}).then((function(e){0===e.data.code?Object(pe["a"])({message:"发起成功",type:"success"}):Object(pe["a"])({message:"发起失败",type:"fail"})})).catch((function(){return Object(pe["a"])({message:"发起失败",type:"fail"})}))},apiCommitRefund:function(){var e={orderId:this.order.id,userId:this.order.userId,username:this.order.userUsername,refundReason:this.refundReason,serviceCost:.1,completestatus:0};this.axios({url:"/user/refund/",method:"post",data:e,headers:{"content-type":"application/json"}}).then((function(e){0===e.data.code?Object(pe["a"])({message:"发起成功",type:"success"}):Object(pe["a"])({message:"发起失败",type:"fail"})})).catch((function(){return Object(pe["a"])({message:"发起失败",type:"fail"})}))},sendRefund:function(){this.apiCommitRefund(),this.apiChangeOrderStatus(),this.childRefresh()},abortOrderStatus:function(){this.apiChangeOrderStatus(),this.childRefresh()}},data:function(){return{orderFoods:[],refundDialog:!1,refundReason:"",abortDialog:!1}},mounted:function(){this.apiRequestFoods(this.order.id)},beforeRouteLeave:function(e,t,o){this.orderFoods=[],o()}},he=me,ve=(o("4ec9"),Object(i["a"])(he,ue,de,!1,null,"39c0400c",null)),ge=ve.exports,be={name:"Order",components:{OrderItem:ge},data:function(){return{isLoading:!1}},methods:Object(f["a"])(Object(f["a"])({onRefresh:function(){var e=this;setTimeout((function(){e.getOrdersByUserId(e.userInfo.id),e.isLoading=!1}),1e3)}},Object(_["b"])("customer",{getOrdersByUserId:"getOrdersByUserId"})),{},{removeItemFromParent:function(e){for(var t=0,o=0;o<this.sortByTimeOrderList.length;o++)if(this.sortByTimeOrderList[o].id===e){t=o;break}var r=Object(le["a"])(this.sortByTimeOrderList).splice(t,1);this.setOrderList(r)}}),computed:Object(f["a"])(Object(f["a"])(Object(f["a"])({},Object(_["c"])("customer",{ordersByUserId:"ordersByUserId",sortByTimeOrderList:"sortByTimeOrderList"})),Object(_["c"])("validate",{userInfo:"userInfo"})),Object(_["d"])("customer",{setOrderList:"SET_ORDER_LIST"})),created:function(){this.userInfo.id&&this.onRefresh()}},ye=be,Se=Object(i["a"])(ye,ie,ce,!1,null,"582da90d",null),_e=Se.exports,Oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#8a91ff"},scopedSlots:e._u([{key:"left",fn:function(){return[o("van-icon",{attrs:{name:"arrow-left",color:"#ffffff"},on:{click:e.exit}})]},proxy:!0},{key:"title",fn:function(){return[o("span",{staticStyle:{color:"#ffffff"}},[e._v(e._s(e.title))])]},proxy:!0}])}),o("ShopList",{ref:"shopList"})],1)},Ie=[],Le={name:"CategoriesShopPage",components:{ShopList:W},data:function(){return{cateId:0,title:""}},methods:{load:function(){switch(this.cateId){case"1":this.title="饮品";break;case"2":this.title="简餐";break;case"3":this.title="商超";break;case"4":this.title="果蔬";break;default:this.title=""}pe["a"].loading({message:"加载中"}),this.$refs.shopList.onRefresh({shopname:"",cateId:this.cateId})},exit:function(){this.$router.go(-1),this.$destroy()}},mounted:function(){this.cateId=this.$route.query.cateId,this.load()},beforeRouteLeave:function(e,t,o){this.$destroy(),o()}},xe=Le,je=Object(i["a"])(xe,Oe,Ie,!1,null,"5fd74dbe",null),we=je.exports;t["default"]=[{path:"/",component:l,redirect:"/index",children:[{path:"index",component:H,name:"Home",title:"customer home",meta:{keepAlive:!0}},{path:"search",component:ee,name:"Search",meta:{keepAlive:!0}},{path:"mine",component:se,name:"Mine",meta:{keepAlive:!0}},{path:"order",component:_e,name:"Order",meta:{keepAlive:!0}},{path:"category",component:we,name:"Categories Shop Page"}]},{path:"/setting",name:"Settings",component:function(){return o.e("customer-setting").then(o.bind(null,"d58e"))}},{path:"/mine/shop-star",name:"StarList",component:function(){return o.e("customer-tab-page").then(o.bind(null,"4888"))}},{path:"/mine/location",name:"MineLocationList",component:function(){return o.e("customer-tab-page").then(o.bind(null,"5028"))}}]},"9ce2":function(e,t,o){"use strict";o.r(t);o("d3b7");t["default"]=[{path:"/deliveryman",name:"Deliveryman module",redirect:"/deliveryman/index",component:function(){return o.e("delivery-home").then(o.bind(null,"d6c7"))},children:[{path:"index",name:"Deliveryman Home and Recommended Orders List",component:function(){return o.e("delivery-home").then(o.bind(null,"6f83"))}},{path:"queue",name:"Deliveryman Queue of Goods",component:function(){return o.e("delivery-tab-page").then(o.bind(null,"e7ef"))}},{path:"mine",name:"Deliveryman Mine",component:function(){return o.e("delivery-tab-page").then(o.bind(null,"0e40"))}}]}]},"9fc0":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#fff6ef"},attrs:{title:e.$route.query.shopname,"left-arrow":""},on:{"click-left":e.exit}}),o("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[o("van-list",{staticStyle:{"margin-bottom":"20%"}},[o("van-cell-group",{attrs:{title:"tips:下拉可手动刷新"}},[e._l(e.shopFoodsList,(function(e){return o("FoodDetailItem",{key:e.id,ref:"foodItem",refInFor:!0,attrs:{food:e}})})),0===e.shopFoodsList.length?o("van-cell",{attrs:{title:"呜呜呜没数据～～"}}):e._e()],2)],1)],1),o("ShopFoodPageSubmitBar",{attrs:{"send-limit":e.sendLimit,nextPage:e.goPreOrder,clickCartButton:e.clickCartButton}}),o("van-action-sheet",{attrs:{round:!1,title:"购物车"},model:{value:e.showCart,callback:function(t){e.showCart=t},expression:"showCart"}},[o("div",{staticStyle:{"margin-bottom":"90px"}},e._l(e.getCartListByShopId,(function(e){return o("CartItem",{key:e.id,attrs:{food:e}})})),1),o("ShopFoodPageSubmitBar",{attrs:{"send-limit":e.sendLimit,nextPage:e.goPreOrder,clickCartButton:e.clickCartButton}})],1)],1)},n=[],a=(o("4de4"),o("53ca")),s=o("2909"),i=o("5530"),c=o("2f62"),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-cell",{scopedSlots:e._u([{key:"right-icon",fn:function(){return[o("van-row",{attrs:{align:"center",gutter:5}},[o("van-col",[o("van-button",{class:{"hidden-elem":e.food.numbers<=0||void 0===e.food.numbers},attrs:{round:"",size:"small",icon:"minus",color:"#c2a078"},on:{click:e.minus}})],1),o("van-col",[o("span",{class:{"hidden-elem":e.food.numbers<=0||void 0===e.food.numbers},staticStyle:{"font-size":"12px"}},[e._v(" "+e._s(e.food.numbers)+" ")])]),o("van-col",[o("van-button",{attrs:{round:"",size:"small",icon:"plus",color:"#c2a078"},on:{click:e.plus}})],1)],1)]},proxy:!0},{key:"title",fn:function(){return[o("van-row",{attrs:{gutter:"20"}},[o("van-col",[o("van-image",{attrs:{"lazy-load":"",width:"60",height:"60",fit:"cover",src:e.food.cover}})],1),o("van-col",[o("div",[o("span",[e._v(e._s(e.food.title))]),o("van-row",{attrs:{gutter:"5"}},[o("van-col",[o("van-rate",{attrs:{color:"#9c95fb","allow-half":"",size:"small"},model:{value:e.fiveStarRate,callback:function(t){e.fiveStarRate=t},expression:"fiveStarRate"}})],1),o("van-col",[o("span",[e._v(e._s(e.fiveStarRate)+"("+e._s(e.food.totalSales)+")")])])],1),o("van-row"),o("van-row",{attrs:{gutter:"5"}},[o("van-col",[o("span",[e._v("￥"+e._s(e.twoDecimal(e.food.sellPrice)))])]),o("van-col",[e.food.sellPrice!==e.food.originPrice?o("span",{staticStyle:{"text-decoration":"line-through",color:"darkgray"}},[e._v("￥"+e._s(e.twoDecimal(e.food.originPrice)))]):e._e()])],1)],1)])],1)]},proxy:!0}])})},u=[],d=o("ed02"),f={name:"FoodDetailItem",props:["food"],data:function(){return{}},computed:Object(i["a"])({fiveStarRate:function(){return Math.round(this.food.praiseRate/2)/10}},Object(c["c"])("customer",{getCartListByShopId:"getCartListByShopId",cartList:"cartList",updateFlag:"updateFlag"})),watch:{updateFlag:function(){this.$forceUpdate()}},methods:Object(i["a"])(Object(i["a"])({twoDecimal:function(e){return Object(d["a"])(e)}},Object(c["d"])("customer",{setCartList:"SET_CART_LIST",changeFlag:"CHANGE_CART_UPDATE_FLAG",plusCartItem:"PLUS_CART_ITEM",minusCartItem:"MINUS_CART_ITEM",updateLocalCart:"SET_SHOP_CART_LIST_BY_SHOP_ID",calculateTotalCost:"CALCULATE_TOTAL_COST"})),{},{plus:function(){this.plusCartItem({shopId:this.$route.params.shopId,foodId:this.food.id}),this.updateLocalCart(this.$route.params.shopId),this.changeFlag(),this.calculateTotalCost(),this.$forceUpdate()},minus:function(){this.minusCartItem({shopId:this.$route.params.shopId,foodId:this.food.id}),this.updateLocalCart(this.$route.params.shopId),this.changeFlag(),this.calculateTotalCost(),this.$forceUpdate()}})},p=f,m=(o("6d9e"),o("2877")),h=Object(m["a"])(p,l,u,!1,null,"08492988",null),v=h.exports,g=o("d399"),b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-card",{attrs:{num:e.food.numbers,price:e.totalPrice(e.sellPrice,e.food.numbers),title:e.food.title,thumb:e.food.cover,"origin-price":e.totalPrice(e.originalPrice,e.food.numbers)},scopedSlots:e._u([{key:"tags",fn:function(){},proxy:!0},{key:"footer",fn:function(){return[o("van-button",{attrs:{size:"mini",color:"#ff3333",round:"",icon:""},on:{click:e.minus}},[o("van-icon",{attrs:{name:"minus",size:"14"}})],1),o("van-button",{attrs:{size:"mini",color:"#ff3333",round:"",icon:""},on:{click:e.plus}},[o("van-icon",{attrs:{name:"plus",size:"14"}})],1)]},proxy:!0}])})},y=[],S={name:"CartItem",props:["food"],computed:Object(i["a"])({sellPrice:function(){return Object(d["a"])(this.food.sellPrice)},originalPrice:function(){return Object(d["a"])(this.food.originPrice)}},Object(c["c"])("customer",{shopFoodsResult:"shopFoodsResult",cartList:"cartList",updateFlag:"updateFlag"})),watch:{updateFlag:function(){this.$forceUpdate()}},methods:Object(i["a"])(Object(i["a"])({totalPrice:function(e,t){return Object(d["a"])(t*e)}},Object(c["d"])("customer",{setCartList:"SET_CART_LIST",changeFlag:"CHANGE_CART_UPDATE_FLAG",plusCartItem:"PLUS_CART_ITEM",minusCartItem:"MINUS_CART_ITEM",updateLocalCart:"SET_SHOP_CART_LIST_BY_SHOP_ID",calculateTotalCost:"CALCULATE_TOTAL_COST"})),{},{plus:function(){this.plusCartItem({shopId:this.$route.params.shopId,foodId:this.food.id}),this.updateLocalCart(this.$route.params.shopId),this.changeFlag(),this.calculateTotalCost(),this.$forceUpdate()},minus:function(){this.minusCartItem({shopId:this.$route.params.shopId,foodId:this.food.id}),this.updateLocalCart(this.$route.params.shopId),this.changeFlag(),this.calculateTotalCost(),this.$forceUpdate()}})},_=S,O=Object(m["a"])(_,b,y,!1,null,"8299df68",null),I=O.exports,L=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-submit-bar",{attrs:{price:e.shopCartTotalPrice.sellPrice,label:"总价：","suffix-label":e.shopCartTotalPrice.originalPrice,"button-text":"下单","button-type":"warning",disabled:!e.sendLimit},on:{submit:e.nextPage},scopedSlots:e._u([{key:"tip",fn:function(){return[e.sendLimit?e._e():o("span",[e._v("未到达起送价：￥"+e._s(e.twoDecimal(e.shop.floorSendCost))+"，还差￥"+e._s(e.twoDecimal(e.shop.floorSendCost-e.shopCartTotalPrice.sellPrice/100)))]),e.sendLimit?o("span",[e._v("已达起送价")]):e._e()]},proxy:!0},{key:"default",fn:function(){return[o("van-button",{attrs:{icon:"",color:"#80bfff"},on:{click:e.clickCartButton}},[o("van-icon",{attrs:{name:"shopping-cart-o",size:"40"}})],1)]},proxy:!0}])})},x=[],j={name:"ShopFoodPageSubmitBar",props:{clickCartButton:{type:Function},nextPage:{type:Function},sendLimit:{type:Boolean}},computed:Object(i["a"])({},Object(c["c"])("customer",{shopCartTotalPrice:"shopCartTotalPrice",shop:"shopById"})),data:function(){return{}},methods:{twoDecimal:function(e){return Object(d["a"])(e)}}},w=j,P=(o("7b25"),Object(m["a"])(w,L,x,!1,null,null,null)),k=P.exports,C={name:"ShopFoodDetailPage",components:{ShopFoodPageSubmitBar:k,CartItem:I,FoodDetailItem:v},data:function(){return{exampleShopFoodDetailItem:{id:1,shopId:1,cateId:1,title:"鸡排",describle:"炸",discount:10,cover:"https://goss.veer.com/creative/vcg/veer/800water/veer-167615731.jpg",originPrice:18,sellPrice:12,showstatus:0,selection:"大",totalSales:542,praiseRate:88,gmtCreate:"2020-11-03 09:46:50",gmtModified:"2020-11-04 13:35:37"},shopFoodsList:[],shopId:null,isLoading:!1,showCart:!1}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["c"])("customer",{shopFoodsResult:"shopFoodsResult",cartList:"cartList",getCartListByShopId:"getCartListByShopId",shopCartTotalPrice:"shopCartTotalPrice",shop:"shopById"})),Object(c["c"])("validate",{userInfo:"userInfo"})),{},{sendLimit:function(){return this.shopCartTotalPrice.sellPrice/100>=this.shop.floorSendCost}}),watch:{shopFoodsResult:function(){this.shopFoodsList=this.shopFoodsResult;for(var e=this.shopFoodsList.filter((function(){return!0})),t=0;t<e.length;t++)e[t].numbers=0;var o=Object(s["a"])(this.cartList);o.push({shopId:this.$route.params.shopId,cart:e}),this.setCartList(o),this.setShopCart(this.$route.params.shopId)}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["b"])("customer",["requestShopFoodsResult","requestShopById"])),Object(c["d"])("customer",{setShopFoodsResult:"SET_SHOP_FOODS_LIST",setCartList:"SET_CART_LIST",setShopCart:"SET_SHOP_CART_LIST_BY_SHOP_ID",setShopCartEmpty:"SET_SHOP_CART_LIST_NULL",clearTotalCost:"CLEAR_TOTAL_COST"})),{},{apiRequestShopFoods:function(){this.requestShopFoodsResult(this.$route.params.shopId)},onRefresh:function(){var e=this;setTimeout((function(){e.apiRequestShopFoods(),e.isLoading=!1}),1e3)},exit:function(){this.$router.go(-1),this.setShopFoodsResult([]),this.setShopCartEmpty(),this.setCartList([]),this.clearTotalCost(),this.$route.meta.keepAlive=!1,this.$destroy()},clickCartButton:function(){this.showCart=!this.showCart},goPreOrder:function(){this.$router.push("/pre-order/"+this.$route.params.shopId)}}),created:function(){g["a"].loading({message:"加载中"}),this.requestShopById(this.$route.params.shopId),this.onRefresh(),console.log(this.userInfo.id+"   this.userInfo typeof ==>"+Object(a["a"])(this.userInfo.id)),this.userInfo.id||Object(g["a"])("未登录")}},T=C,A=Object(m["a"])(T,r,n,!1,null,"4bb8bd13",null),R=A.exports,E=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("van-nav-bar",{staticStyle:{overflow:"auto",background:"#fff6ef"},attrs:{title:"订单确认","left-arrow":""},on:{"click-left":e.exit}}),o("ChooseAddress",{ref:"address"}),o("van-cell-group",{attrs:{title:"预览"}},[o("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[o("span",{staticStyle:{color:"#626262"}},[e._v(e._s(e.shop.shopname))])]},proxy:!0}])}),e._l(e.getCartListByShopId,(function(e){return o("FoodListItem",{key:e.id,attrs:{food:e}})})),o("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[o("van-row",{attrs:{type:"flex",justify:"end"}},[o("span",[e._v("包装费：￥"+e._s(e.twoDecimal(e.shop.boxCost)))])]),o("van-row",{attrs:{type:"flex",justify:"end"}},[o("span",[e._v("配送费：￥"+e._s(e.twoDecimal(e.shop.sendCost)))])]),o("van-row",{attrs:{type:"flex",justify:"end"}},[o("span",[e._v("总价： "),o("span",{staticStyle:{color:"#e60000"}},[e._v("￥"+e._s(e.twoDecimal(e.shop.boxCost+e.shop.sendCost+e.shopCartTotalPrice.sellPrice/100)))])])])]},proxy:!0}])})],2),o("van-cell-group",{staticStyle:{"margin-bottom":"60px"},attrs:{title:"备注"}},[o("van-cell",[o("van-field",{attrs:{type:"textarea",clearable:"",placeholder:"要对商家或骑手提的额外需求"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1)],1),o("CommitOrderBar",{attrs:{commitOrder:e.commitOrder}})],1)},F=[],D=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-cell-group",{attrs:{title:"地址选择 tips:<----向左滑列表项可进行删改操作"}},[o("van-cell",{attrs:{"is-link":""},on:{click:e.openAddDialog},scopedSlots:e._u([{key:"title",fn:function(){return[o("van-row",{attrs:{gutter:20}},[o("van-col",[o("span",{staticStyle:{"font-size":"36px",color:"#c2a078"}},[e._v("+")])]),o("van-col",[o("span",{staticStyle:{"font-size":"18px",color:"#cac4c4"}},[e._v("添加地址")])])],1)]},proxy:!0}])}),o("van-dialog",{attrs:{title:"增改地址","show-cancel-button":""},on:{confirm:e.handleCommit},model:{value:e.addAddressDialog,callback:function(t){e.addAddressDialog=t},expression:"addAddressDialog"}},[o("van-form",[o("van-field",{attrs:{placeholder:"姓名往这填",autofocus:"",label:"姓名",rules:[{required:!0,message:"请填写姓名"}],clearable:""},model:{value:e.newAddress.username,callback:function(t){e.$set(e.newAddress,"username",t)},expression:"newAddress.username"}}),o("van-field",{attrs:{name:"称谓",label:"称谓"},scopedSlots:e._u([{key:"input",fn:function(){return[o("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.newAddress.gender,callback:function(t){e.$set(e.newAddress,"gender",t)},expression:"newAddress.gender"}},[o("van-radio",{attrs:{name:"先生"}},[e._v("先生")]),o("van-radio",{attrs:{name:"女士"}},[e._v("女士")])],1)]},proxy:!0}])}),o("van-field",{attrs:{placeholder:"电话往这填",autofocus:"",label:"电话",rules:[{required:!0,message:"请填写电话"}],clearable:""},model:{value:e.newAddress.mobile,callback:function(t){e.$set(e.newAddress,"mobile",t)},expression:"newAddress.mobile"}}),o("van-field",{attrs:{placeholder:"地址往这填",autofocus:"",label:"地址",rules:[{required:!0,message:"请填写地址"}],maxlength:"25","show-word-limit":"",clearable:""},model:{value:e.newAddress.adress,callback:function(t){e.$set(e.newAddress,"adress",t)},expression:"newAddress.adress"}})],1)],1),e._l(e.userAddressList,(function(t,r){return o("van-swipe-cell",{key:t.id,scopedSlots:e._u([{key:"right",fn:function(){return[o("van-button",{staticStyle:{height:"100%"},attrs:{square:"",type:"danger",text:"删除"},on:{click:function(o){return e.removeAddress(t.id)}}}),o("van-button",{staticStyle:{height:"100%"},attrs:{square:"",type:"warning",text:"修改"},on:{click:function(o){return e.alterAddress(t)}}})]},proxy:!0}],null,!0)},[o("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[o("van-row",{attrs:{gutter:20}},[o("van-col",[o("van-radio-group",{model:{value:e.selectAddress,callback:function(t){e.selectAddress=t},expression:"selectAddress"}},[o("van-radio",{attrs:{name:r}})],1)],1),o("van-col",{attrs:{span:20}},[o("van-row",[o("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(t.adress))])]),o("van-row",{attrs:{gutter:5}},[o("van-col",{attrs:{offset:2}},[o("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(t.username))])]),o("van-col",[o("span",{staticStyle:{"font-size":"10px",color:"#696969"}},[e._v(e._s(t.gender))])]),o("van-col",[o("span",[e._v(e._s(t.mobile))])])],1)],1)],1)]},proxy:!0}],null,!0)})],1)}))],2)},U=[],$={name:"ChooseAddress",computed:Object(i["a"])(Object(i["a"])({},Object(c["c"])("customer",{userAddressList:"userAddressList"})),Object(c["c"])("validate",{userInfo:"userInfo"})),data:function(){return{selectAddress:null,addAddressDialog:!1,newAddress:{userId:null,username:"",gender:"先生",mobile:"",adress:""},dialogType:"add"}},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])("customer",{requestUserAddressList:"requestUserAddressList"})),{},{apiRequestAddAddress:function(){var e=this,t=this.newAddress;t.userId=this.userInfo.id,console.log(t),this.axios({url:"/useraddress/save",method:"post",data:t,headers:{"content-type":"application/json"}}).then((function(t){0===t.data.code?(Object(g["a"])("已添加"),e.requestUserAddressList(e.userInfo.id)):Object(g["a"])({message:"添加失败",type:"fail"})})).catch((function(){Object(g["a"])({message:"添加异常",type:"fail"})}))},removeAddress:function(e){var t=this;this.axios.delete("/useraddress/"+e).then((function(e){0===e.data.code&&t.requestUserAddressList(t.userInfo.id)})).catch((function(){return Object(g["a"])("删除失败")}))},alterAddress:function(e){this.dialogType="update",this.newAddress=Object(i["a"])({},e),this.addAddressDialog=!0},openAddDialog:function(){this.dialogType="add",this.addAddressDialog=!0},handleCommit:function(){"add"===this.dialogType?this.apiRequestAddAddress():"update"===this.dialogType&&this.apiRequestUpdateAddress()},apiRequestUpdateAddress:function(){var e=this,t=this.newAddress;t.userId=this.userInfo.id,this.axios({method:"put",url:"/useraddress/update",data:t,headers:{"content-type":"application/json"}}).then((function(t){0===t.data.code?(Object(g["a"])("修改成功"),e.requestUserAddressList(e.userInfo.id)):Object(g["a"])({message:"修改失败",type:"fail"})})).catch((function(){Object(g["a"])({message:"修改异常",type:"fail"})}))}})},B=$,q=Object(m["a"])(B,D,U,!1,null,"48c1bf2d",null),M=q.exports,H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[o("van-row",{attrs:{gutter:"20"}},[o("van-col",[o("van-image",{attrs:{"lazy-load":"",width:"60",height:"60",fit:"cover",src:e.food.cover}})],1),o("van-col",[o("div",[o("span",[e._v(e._s(e.food.title))]),o("van-row"),o("van-row",{attrs:{gutter:"5"}},[o("van-col",[o("span",[e._v("￥"+e._s(e.twoDecimal(e.food.sellPrice*e.food.numbers)))])]),o("van-col",[e.food.sellPrice!==e.food.originPrice?o("span",{staticStyle:{"text-decoration":"line-through",color:"darkgray"}},[e._v("￥"+e._s(e.twoDecimal(e.food.originPrice*e.food.numbers)))]):e._e()])],1)],1)])],1)]},proxy:!0},{key:"extra",fn:function(){return[o("span",[e._v("x"+e._s(e.food.numbers))])]},proxy:!0}])})},z=[],N={name:"FoodListItem",props:["food"],data:function(){return{}},computed:{sellPrice:function(){return Object(d["a"])(this.food.sellPrice)},originalPrice:function(){return Object(d["a"])(this.food.originPrice)}},methods:{totalPrice:function(e,t){return Object(d["a"])(t*e)},twoDecimal:function(e){return Object(d["a"])(e)}}},G=N,V=Object(m["a"])(G,H,z,!1,null,"4be51987",null),Y=V.exports,K=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("van-submit-bar",{attrs:{price:e.shopCartTotalPrice.sellPrice,label:"总价：","suffix-label":e.shopCartTotalPrice.originalPrice,"button-text":"下单","button-type":"warning"},on:{submit:e.commitOrder}})},Q=[],W={name:"CommitOrderBar",props:["commitOrder"],computed:Object(i["a"])({},Object(c["c"])("customer",{shopCartTotalPrice:"shopCartTotalPrice"}))},J=W,X=Object(m["a"])(J,K,Q,!1,null,"09f6347e",null),Z=X.exports,ee={name:"PreOrderPage",components:{ChooseAddress:M,FoodListItem:Y,CommitOrderBar:Z},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["b"])("customer",{requestUserAddressList:"requestUserAddressList",requestUserOrderCommit:"requestUserOrderCommit",requestShopById:"requestShopById"})),Object(c["d"])("customer",{setUserAddressList:"SET_USER_ADDRESS_LIST"})),{},{exit:function(){this.$router.go(-1),this.setUserAddressList([])},commitOrder:function(){var e=this.userAddressList[this.$refs.address.selectAddress];if(console.log("address===>"+e),console.log("address type===>"+Object(a["a"])(e)),void 0===e)return console.log("undefined into this brunch===>"+e),void Object(g["a"])({message:"请选择地址",type:"fail"});this.apiRequestCommitOrder({id:this.userInfo.id,order:{note:this.note,userAddress:e.adress,userAddressId:e.id,userId:this.userInfo.id,userMobile:e.mobile,userUsername:e.username,shopId:this.shop.id,totalMoney:this.shop.boxCost+this.shop.sendCost+this.shopCartTotalPrice.sellPrice/100},foods:this.getCartListByShopId})},apiRequestCommitOrder:function(e){var t=this;this.axios({method:"post",url:"/order/"+e.id,data:{orderDetailEntity:e.order,orderFoodEntities:e.foods},headers:{"content-type":"application/json"}}).then((function(e){0===e.data.code?(Object(g["a"])({message:"下单成功",type:"success"}),t.$router.push("/index")):1e3===e.data.code?Object(g["a"])({message:e.data.msg,type:"fail"}):(console.log(e.data),Object(g["a"])({message:"请求失败",type:"fail"}))}))}}),mounted:function(){console.log("this.$route.params.shopId===>"+this.$route.params.shopId),this.requestUserAddressList(this.userInfo.id),this.requestShopById(this.$route.params.shopId)},data:function(){return{twoDecimal:function(e){return Object(d["a"])(e)},note:""}},computed:Object(i["a"])(Object(i["a"])({},Object(c["c"])("customer",{shopCartTotalPrice:"shopCartTotalPrice",userAddressList:"userAddressList",getCartListByShopId:"getCartListByShopId",shop:"shopById"})),Object(c["c"])("validate",{userInfo:"userInfo"}))},te=ee,oe=Object(m["a"])(te,E,F,!1,null,"77d592d4",null),re=oe.exports;t["default"]=[{path:"/shop/:shopId",name:"Shop Display Foods",component:R,meta:{keepAlive:!0}},{path:"/pre-order/:shopId",name:"Pre Order Foods",component:re}]},a9d5:function(e,t,o){},be4a:function(e,t,o){var r={"./customer-page-L1-L2.js":"87bc","./customer-page-L3.js":"9fc0","./index.js":"24b1"};function n(e){var t=a(e);return o(t)}function a(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id="be4a"},c1f7:function(e,t,o){var r={"./deliveryman-page-L1-L2.js":"9ce2","./index.js":"2243"};function n(e){var t=a(e);return o(t)}function a(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id="c1f7"},d56b:function(e,t,o){var r={"./customer/customer-page-L1-L2.js":"87bc","./customer/customer-page-L3.js":"9fc0","./customer/index.js":"24b1","./deliveryman/deliveryman-page-L1-L2.js":"9ce2","./deliveryman/index.js":"2243","./index.js":"6bae"};function n(e){var t=a(e);return o(t)}function a(e){if(!o.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id="d56b"},db03:function(e,t){},dcfe:function(e,t,o){},ed02:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return n}));o("c975"),o("d3b7"),o("4d63"),o("ac1f"),o("25f0"),o("4d90"),o("5319");var r=function(e){var t=parseFloat(e);if(isNaN(t))return 0;t=Math.round(100*e)/100;var o=t.toString(),r=o.indexOf(".");r<0&&(r=o.length,o+=".");while(o.length<=r+2)o+="0";return o};function n(e,t){var o,r={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var n in r)o=new RegExp("("+n+")").exec(e),o&&(e=e.replace(o[1],1==o[1].length?r[n]:r[n].padStart(o[1].length,"0")));return e}},f9e9:function(e,t,o){}});
//# sourceMappingURL=app.bda8f899.js.map