(function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var o={},r={app:0},n=[];function i(e){return s.p+"js/"+({"group-common":"group-common"}[e]||e)+"."+{"group-common":"5053baf4"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,o){a=r[e]=[t,o]}));t.push(a[2]=o);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(e);var l=new Error;n=function(t){c.onerror=c.onload=null,clearTimeout(d);var a=r[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",l.name="ChunkLoadError",l.type=o,l.request=n,a[1](l)}r[e]=void 0}};var d=setTimeout((function(){n({type:"timeout",target:c})}),12e4);c.onerror=c.onload=n,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(a,o,function(t){return e[t]}.bind(null,o));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"Vue",(function(){return o["a"]}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",[a("router-view"),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var o=t.attrs;return[a("v-btn",e._b({attrs:{text:"",color:"red"},on:{click:function(t){return e.$router.replace("/login")}}},"v-btn",o,!1),[e._v(" 登录 ")])]}}]),model:{value:e.informReLogin,callback:function(t){e.informReLogin=t},expression:"informReLogin"}},[e._v(" 登录过期，请重新登录 ")]),a("v-snackbar",{model:{value:e.loginedInfo,callback:function(t){e.loginedInfo=t},expression:"loginedInfo"}},[e._v(" 登录成功 ")])],1)],1)},n=[],i=(a("d81d"),a("2909")),s=a("5530"),c=a("53ca"),l=a("2f62"),d={name:"App",created:function(){var e=window.localStorage.getItem("shopId");console.log("userId=====>value:"+e+"   ==>type:  "+Object(c["a"])(e)),null===e||"number"!==typeof e&&"string"!==typeof e?this.informReLogin=!0:(console.log("logging into action==>"),this.apiGetUserInfo(e),this.apiGetShopList(e))},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(l["b"])("validate",{getShopList:"getShopList"})),Object(l["b"])("shopowner",{getOrderByShopIds:"getOrderByShopIds"})),Object(l["d"])("shopowner",{setOrderList:"SET_ORDER_LIST",updateOrder:"SET_UPDATE_ORDER_FLAG"})),Object(l["d"])("validate",{setUserInfo:"SET_USER_INFO",setShopList:"SET_SHOP_LIST"})),{},{apiGetUserInfo:function(e){var t=this;this.axios.get("/user/info/"+e).then((function(e){var a=e.data;null===a.user&&402===a.code&&403===a.code&&300===a.code||(t.informReLogin=!0,t.setUserInfo(a.user)),t.informReLogin=!0})).catch((function(){t.informReLogin=!0}))},apiGetShopList:function(e){var t=this;this.axios.get("/shopinfo/list/"+e).then((function(e){var a=e.data;402!==a.code&&403!==a.code?(t.setShopList(a.list),t.apiGetOrderByShopIds(a.list.map((function(e){return e.id}))),t.loginedInfo=!0):t.informReLogin=!0})).catch((function(){t.informReLogin=!0}))},apiGetOrderByShopIds:function(e){for(var t=[],a=0;a<e.length;a++)this.axios.put("/shop/orderlist/"+e[a]).then((function(e){var a=e.data;a.list&&t.push.apply(t,Object(i["a"])(a.list))}));this.setOrderList(t),this.updateOrder()}}),computed:Object(s["a"])(Object(s["a"])({},Object(l["c"])("validate",{userInfo:"userInfo",shopIds:"shopIds"})),Object(l["c"])("shopowner",{sortByTimeOrderList:"sortByTimeOrderList"})),data:function(){return{informReLogin:!1,loginedInfo:!1}}},u=d,m=a("2877"),v=a("6544"),p=a.n(v),f=a("7496"),h=a("8336"),b=a("2db4"),g=Object(m["a"])(u,r,n,!1,null,"4a6970f2",null),_=g.exports;p()(g,{VApp:f["a"],VBtn:h["a"],VSnackbar:b["a"]});var x,S,y={module:"shopowner",name:"商家模块",orderList:[],updateOrderFlag:0},V=(a("b0c0"),a("ade3")),k="SET_MODULE",O="SET_NAME",I="APPEND_ORDER_LIST",w="SET_ORDER_LIST",C="SET_UPDATE_ORDER_FLAG",T=(x={},Object(V["a"])(x,k,(function(e,t){e.module=t})),Object(V["a"])(x,O,(function(e,t){e.name=t})),Object(V["a"])(x,I,(function(e,t){var a;(a=e.orderList).push.apply(a,Object(i["a"])(t))})),Object(V["a"])(x,w,(function(e,t){e.orderList=t})),Object(V["a"])(x,C,(function(e){e.updateOrderFlag++})),x),D={module:function(e){return e.module},name:function(e){return e.name},orderList:function(e){return e.orderList},sortByTimeOrderList:function(e){var t=Object(i["a"])(e.orderList);return t.sort((function(e,t){return t.id-e.id})),t},newOrderList:function(e){return e.newOrderList},historyOrderList:function(e){return e.historyOrderList},updateOrderFlag:function(e){return e}},R={shopAction:function(e,t){var a=e.commit;a(k,t.module),a(O,t.name)},getOrderByShopIds:function(e,t){for(var a=e.commit,r=0;r<t.length;r++)o["a"].axios.put("/shop/orderlist/"+t[r]).then((function(e){var t=e.data;t.list&&a(I,t.list)}))}},L={namespaced:!0,state:y,getters:D,mutations:T,actions:R},j={module:"validate",name:"鉴定权限模块",userInfo:{},shops:[]},E="SET_MODULE",P="SET_NAME",A="SET_USER_INFO",F="SET_SHOP_LIST",B="SET_SHOP_BY_SHOP_ID",$=(S={},Object(V["a"])(S,E,(function(e,t){e.module=t})),Object(V["a"])(S,P,(function(e,t){e.name=t})),Object(V["a"])(S,A,(function(e,t){e.userInfo=t})),Object(V["a"])(S,F,(function(e,t){e.shops=t})),Object(V["a"])(S,B,(function(e,t){for(var a=t.shop,o=t.id,r=Object(i["a"])(e.shops),n=0;n<r;n++)if(r[n].id===o){r[n]=a,e.shops=r;break}})),S),N={module:function(e){return e.module},name:function(e){return e.name},userInfo:function(e){return e.userInfo},shops:function(e){return e.shops},shopIds:function(e){return e.shops.map((function(e){return e.id}))}},M=a("4328"),U=a.n(M),q={setModuleInfo:function(e,t){var a=e.commit;a(E,t.module),a(P,t.name)},setUserInfo:function(e,t){var a=e.commit;a(A,t)},userLogin:function(e,t){var a=e.commit;o["a"].axios({method:"post",url:"/user/login",data:U.a.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){var t=e.data;300===t.code||2===t.user.identity&&(a(A,t.user),window.localStorage.setItem("shopId",t.user.id))})).catch((function(){}))},getUserInfo:function(e,t){var a=e.commit;o["a"].axios.get("/user/info/"+t).then((function(e){var t=e.data;null===t.user||402===t.code||300===t.code||a(A,t.user)})).catch((function(){}))},getShopList:function(e,t){var a=e.commit;o["a"].axios.get("/shopinfo/list/"+t).then((function(e){var t=e.data;402!==t.code&&a(F,t.list)})).catch((function(e){console.log("failed:===>::"+e)}))}},H={namespaced:!0,state:j,getters:N,mutations:$,actions:q},G=a("b054"),Q=a.n(G);o["a"].use(l["a"]);var Y=!1,z=new l["a"].Store({modules:{shopowner:L,validate:H},strict:Y,plugins:Y?[Q()()]:[]}),J=(a("45fc"),a("a434"),a("99af"),a("8c4f")),K=a("6bae"),W=(a("d3b7"),[{path:"/",redirect:"/home"},{path:"/nopermission",name:"无权限页面",component:function(){return a.e("group-common").then(a.bind(null,"a9d0"))}},{path:"*",component:function(){return a.e("group-common").then(a.bind(null,"4b90"))}}]);o["a"].use(J["a"]);var X=new J["a"]({scrollBehavior:function(e,t,a){return a||{x:0,y:0}},routes:[].concat(Object(i["a"])(W),Object(i["a"])(K["default"]))}),Z=X,ee=a("323e"),te=a.n(ee);a("a5d8");te.a.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3});var ae=function(e){var t=window.__axiosPromiseArr;if(t&&t.length){var a=t.length;while(a--)t[a].cancel("cancel"),t.splice(a,1)}e()};Z.beforeEach((function(e,t,a){te.a.start(),e.matched.some((function(e){return e.meta.requiresAuth}))?sessionStorage.getItem("token")?ae(a):a({path:"/nopermission",query:{redirect:e.fullPath}}):ae(a),a()})),Z.afterEach((function(e){te.a.done(),document.title=e.name||""}));var oe=Z,re=a("bc3a"),ne=a.n(re),ie=a("2106"),se=a.n(ie),ce=a("f309");o["a"].use(ce["a"]);var le=new ce["a"]({});a("bf40");ne.a.defaults.timeout=1e5,ne.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",ne.a.defaults.baseURL="/waimai/",o["a"].config.productionTip=!1,o["a"].use(se.a,ne.a),new o["a"]({store:z,router:oe,vuetify:le,render:function(e){return e(_)}}).$mount("#app")},5766:function(e,t,a){"use strict";a("61fc")},"58bb":function(e,t,a){var o={"./home.js":"f39b","./index.js":"f761"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id="58bb"},"61fc":function(e,t,a){},"6bae":function(e,t,a){"use strict";a.r(t);a("99af"),a("4160"),a("d3b7"),a("159b"),a("ddb0");var o=a("d56b"),r=[];o.keys().forEach((function(e){"./index.js"!==e&&(r=r.concat(o(e).default))})),t["default"]=r},d56b:function(e,t,a){var o={"./home/home.js":"f39b","./home/index.js":"f761","./index.js":"6bae"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id="d56b"},f39b:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:"","show-arrows":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("span",[e._v("xx外卖商家平台")]),e._l(e.items,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),a("v-btn",{attrs:{text:""},on:{click:e.logout}},[e._v("退出登录")])],2),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{key:"订单"},[a("OrderPage")],1),a("v-tab-item",{key:"菜品"},[a("FoodPage")],1),a("v-tab-item",{key:"店铺"},[a("ShopPage")],1),a("v-tab-item",{key:"退款"},[a("RefundPage")],1),a("v-tab-item",{key:"商家中心"},[a("InfoPage")],1)],1)],1)},r=[],n=(a("ac1f"),a("5319"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("订单列表 "),a("v-btn",{attrs:{icon:""},on:{click:e.updateOrderList}},[a("v-icon",[e._v("mdi-cached")])],1)],1),a("v-container",[a("v-row",[a("v-card-title",[a("h5",[e._v("已接单")])]),a("v-card-text",[a("OrderList",{attrs:{orderList:e.newOrderList,haveControl:!0}})],1)],1),a("v-row",[a("v-card-title",[a("h5",[e._v("历史订单")])]),a("v-card-text",[a("OrderList",{attrs:{orderList:e.historyOrderList,haveControl:!0}})],1)],1)],1)],1)}),i=[],s=(a("4de4"),a("2909")),c=a("5530"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",e._l(e.orderList,(function(t){return a("v-col",{key:t.id,attrs:{md:3}},[a("OrderItem",{attrs:{item:t,"have-control":e.haveControl}})],1)})),1)},d=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-title",[e._v(e._s(e.item.shopShopname+" #"+e.item.id))]),a("v-card-subtitle",[e._v(e._s(e.modifiedTime(new Date(e.item.gmtCreate))))]),a("v-card-text",[a("OrderFoodTable",{ref:"foodTable",attrs:{order:e.item}}),a("v-container",[a("v-row",[e._v("包装费：￥"+e._s(e.twoDecimal(e.item.boxCost)))]),a("v-row",[e._v("配送费：￥"+e._s(e.twoDecimal(e.item.sendCost)))]),a("v-row",[e._v("本单收入：￥"+e._s(e.twoDecimal(e.item.totalMoney-e.item.sendCost-2)))]),a("v-row",[e._v(e._s(e.getDate(new Date(e.item.gmtCreate))))])],1)],1),a("v-card-actions",[e.haveControl?a("v-btn",{attrs:{color:"#ff3333"},on:{click:e.createRefundFromShopowner}},[a("span",{staticStyle:{color:"#ebebeb"}},[e._v("退款操作")])]):e._e()],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.activeRefundDialog,callback:function(t){e.activeRefundDialog=t},expression:"activeRefundDialog"}},[a("v-form",[a("v-card",[a("v-app-bar",[a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:function(t){e.activeRefundDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v("快速订单退款")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:e.beforeCommitUpdate}},[a("v-icon",[e._v("mdi-content-save")])],1)],1),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("退款菜品")]),a("v-list-item",[a("v-list-item-content",[a("span",{staticStyle:{color:"green"}},[e._v("对未送达订单，要全额退款建议联系顾客，由顾客发起退单请求")]),a("br"),a("span",{staticStyle:{color:"green"}},[e._v("勾选菜品+填入份数")])])],1),a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[a("v-checkbox",{attrs:{indeterminate:e.selectAllIndeterminate},model:{value:e.selectedAll,callback:function(t){e.selectedAll=t},expression:"selectedAll"}})],1),a("th"),a("th",{staticClass:"text-left"},[e._v(" 菜品 ")]),a("th",{staticClass:"text-left",staticStyle:{color:"red"}},[e._v(" 退款份数 ")]),a("th",{staticClass:"text-left"},[e._v(" 原份数 ")]),a("th",[e._v("单价")]),a("th",[e._v("原价")])])]),a("tbody",e._l(e.$refs.foodTable.foods,(function(t,o){return a("tr",{key:o},[a("td",[a("v-checkbox",{attrs:{value:t},model:{value:e.selectItems,callback:function(t){e.selectItems=t},expression:"selectItems"}})],1),a("td",[a("v-img",{attrs:{src:t.cover,"max-width":"40","max-height":"40"}})],1),a("td",[e._v(e._s(t.title))]),a("td",[a("v-text-field",{attrs:{rules:[function(e){return e>0&&e<=t.numbers&&!!e||"请输入不大于原份数的正整值"}],type:"number"},model:{value:t.refundNumbers,callback:function(a){e.$set(t,"refundNumbers",a)},expression:"item.refundNumbers"}})],1),a("td",[e._v(e._s(t.numbers))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.sellPrice)))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.originPrice)))])])})),0)]},proxy:!0}])}),a("v-list-item",[a("v-list-item-content",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-file-document-edit-outline",label:"退款原因",clearable:"",counter:50},model:{value:e.refundReason,callback:function(t){e.refundReason=t},expression:"refundReason"}})],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.reConfirmDialog,callback:function(t){e.reConfirmDialog=t},expression:"reConfirmDialog"}},[a("v-card",[a("v-card-title",[e._v("确认退款")]),a("v-card-subtitle",[e.haveNoNumberItem?a("p",[a("span",{staticStyle:{color:"red"}},[e._v("注意")]),e._v("：有菜品"),a("span",{staticStyle:{color:"red"}},[e._v("没有")]),e._v(" 填入退款份数，将"),a("span",{staticStyle:{color:"red"}},[e._v("不")]),e._v("对此商品进行退款操作!!!"),a("br")]):e._e(),e._v(" 确认主动发起退款 "),a("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(e.twoDecimal(this.refundPrice)))]),e._v(" ，操作无法恢复 ")]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red accent-4"},on:{click:e.commitUpdate}},[e._v("确认")]),a("v-btn",{attrs:{text:"",color:"brown darken-4"},on:{click:function(t){e.reConfirmDialog=!1}}},[e._v("取消")])],1)],1)],1),a("v-snackbar",{attrs:{top:"",color:"success"},model:{value:e.successRefund,callback:function(t){e.successRefund=t},expression:"successRefund"}},[a("v-alert",{attrs:{type:"success"}},[e._v(" 退款成功 ")])],1),a("v-snackbar",{attrs:{top:"",color:"info"},model:{value:e.failedRefund,callback:function(t){e.failedRefund=t},expression:"failedRefund"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 退款失败 ")])],1),a("v-snackbar",{attrs:{top:"",color:"info"},model:{value:e.noControlRefund,callback:function(t){e.noControlRefund=t},expression:"noControlRefund"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 退款未生成，退款金额为￥0.00 ")])],1)],1)},m=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panels",[a("v-card",[a("v-expansion-panel",[a("v-expansion-panel-header",[a("v-banner",[e._v(" 总价：￥"+e._s(e.twoDecimal(e.order.totalMoney))+" ")])],1),a("v-expansion-panel-content",[e._v(" 状态："+e._s(e.order.completestatus)+" "),a("v-banner",[e._v(" 备注： "+e._s(e.order.note)+" ")]),a("v-banner",[e._v("地址："+e._s(e.order.userAddress))]),a("v-card-title",[a("v-banner",[e._v(e._s(e.order.userUsername))])],1),a("v-card-subtitle",[a("v-banner",[e._v(e._s(e.order.userMobile))])],1),a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th"),a("th",{staticClass:"text-left"},[e._v(" 菜品 ")]),a("th",{staticClass:"text-left"},[e._v(" 份数 ")]),a("th",[e._v("单价")]),a("th",[e._v("原价")])])]),a("tbody",e._l(e.foods,(function(t,o){return a("tr",{key:o},[a("td",[a("v-img",{attrs:{src:t.cover,"max-width":"40","max-height":"40"}})],1),a("td",[e._v(e._s(t.title))]),a("td",[e._v(e._s(t.numbers))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.sellPrice)))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.originPrice)))])])})),0)]},proxy:!0}])})],1)],1)],1)],1)},p=[];a("c975"),a("d3b7"),a("4d63"),a("25f0"),a("4d90");function f(e,t){var a,o={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var r in o)a=new RegExp("("+r+")").exec(e),a&&(e=e.replace(a[1],1==a[1].length?o[r]:o[r].padStart(a[1].length,"0")));return e}var h=function(e){var t=parseFloat(e);if(isNaN(t))return 0;t=Math.round(100*e)/100;var a=t.toString(),o=a.indexOf(".");o<0&&(o=a.length,a+=".");while(a.length<=o+2)a+="0";return a},b={name:"OrderFoodTable",props:["order"],data:function(){return{foods:[]}},methods:{twoDecimal:function(e){return h(e)},apiRequestGetFoodsByOrderId:function(){var e=this,t=this.order.id;this.axios.get("/orderfood/"+t).then((function(t){e.foods=t.data.list}))}},mounted:function(){this.apiRequestGetFoodsByOrderId()}},g=b,_=a("2877"),x=a("6544"),S=a.n(x),y=a("e4e5"),V=a("b0af"),k=a("99d9"),O=a("cd55"),I=a("49e2"),w=a("c865"),C=a("0393"),T=a("adda"),D=a("1f4f"),R=Object(_["a"])(g,v,p,!1,null,"c9bf5b38",null),L=R.exports;S()(R,{VBanner:y["a"],VCard:V["a"],VCardSubtitle:k["b"],VCardTitle:k["d"],VExpansionPanel:O["a"],VExpansionPanelContent:I["a"],VExpansionPanelHeader:w["a"],VExpansionPanels:C["a"],VImg:T["a"],VSimpleTable:D["a"]});var j={name:"OrderItem",components:{OrderFoodTable:L},props:{haveControl:{},item:{type:Object}},data:function(){return{activeRefundDialog:!1,selectItems:[],selectedAll:!1,selectAllIndeterminate:!1,reConfirmDialog:!1,refundPrice:0,haveNoNumberItem:!1,refundReason:"",successRefund:!1,failedRefund:!1,noControlRefund:!1}},watch:{selectedAll:function(e){console.log("watched ====>"+e),e?(console.log("watched ====>"+e),this.selectItems=Object(s["a"])(this.$refs.foodTable.foods),this.selectAllIndeterminate=!1):(console.log("watched ====>"+e),this.selectItems=[],this.selectAllIndeterminate=!1)},selectItems:function(){console.log("watched select item change===="),this.selectAllIndeterminate=this.selectItems.length>0&&this.selectItems.length<this.$refs.foodTable.foods.length,0===this.selectItems.length&&(this.selectedAll=!1),this.selectItems.length===this.$refs.foodTable.foods.length&&(this.selectedAll=!0)}},methods:{modifiedTime:function(e){return f("HH:MM",e)},getDate:function(e){return f("mm月dd日",e)},twoDecimal:function(e){return h(e)},createRefundFromShopowner:function(){this.activeRefundDialog=!0},commitUpdate:function(){var e=this,t={completestatus:1,orderId:this.item.id,payMoney:this.refundPrice,refundReason:this.refundReason,serviceCost:.1,userId:this.item.userId,username:this.item.userUsername};if(console.log(t),0===t.payMoney)return this.noControlRefund=!0,void(this.reConfirmDialog=!1);this.axios({method:"post",url:"/orderrefund/objective-save",data:t,headers:{"content-type":"application/json"}}).then((function(t){0===t.data.code&&(e.successRefund=!0,e.reConfirmDialog=!1,e.activeRefundDialog=!1)})).catch((function(){e.failedRefund=!0}))},beforeCommitUpdate:function(){this.reConfirmDialog=!0;for(var e=0,t=0,a=0;a<this.selectItems.length;a++){var o=this.selectItems[a].sellPrice*this.selectItems[a].refundNumbers;o&&(e+=o),console.log("isNaN(res)===>"+isNaN(o)),isNaN(o)&&t++}this.refundPrice=e,this.haveNoNumberItem=t>0}}},E=j,P=a("0798"),A=a("40dc"),F=a("8336"),B=a("ac7c"),$=a("a523"),N=a("169a"),M=a("4bd4"),U=a("132d"),q=a("8860"),H=a("da13"),G=a("5d23"),Q=a("0fd9"),Y=a("2db4"),z=a("2fa4"),J=a("e0c7"),K=a("8654"),W=a("2a7f"),X=Object(_["a"])(E,u,m,!1,null,null,null),Z=X.exports;S()(X,{VAlert:P["a"],VAppBar:A["a"],VBtn:F["a"],VCard:V["a"],VCardActions:k["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VCheckbox:B["a"],VContainer:$["a"],VDialog:N["a"],VForm:M["a"],VIcon:U["a"],VImg:T["a"],VList:q["a"],VListItem:H["a"],VListItemContent:G["a"],VRow:Q["a"],VSimpleTable:D["a"],VSnackbar:Y["a"],VSpacer:z["a"],VSubheader:J["a"],VTextField:K["a"],VToolbarTitle:W["a"]});var ee={name:"OrderList",components:{OrderItem:Z},props:["orderList","haveControl"]},te=ee,ae=a("62ad"),oe=Object(_["a"])(te,l,d,!1,null,null,null),re=oe.exports;S()(oe,{VCol:ae["a"],VRow:Q["a"]});var ne=a("2f62"),ie={name:"OrderPage",components:{OrderList:re},mounted:function(){},computed:Object(c["a"])(Object(c["a"])({},Object(ne["c"])("validate",{shops:"shops",shopIds:"shopIds"})),Object(ne["c"])("shopowner",{sortByTimeOrderList:"sortByTimeOrderList",updateOrderFlag:"updateOrderFlag"})),watch:{sortByTimeOrderList:function(){this.newOrderList=this.sortByTimeOrderList.filter((function(e){return"商家已接单"===e.completestatus})),this.historyOrderList=this.sortByTimeOrderList.filter((function(e){return"已完成"===e.completestatus||"配送中"===e.completestatus||"等待骑手取单"===e.completestatus}))},updateOrderFlag:function(){this.newOrderList=this.sortByTimeOrderList.filter((function(e){return"商家已接单"===e.completestatus})),this.historyOrderList=this.sortByTimeOrderList.filter((function(e){return"已完成"===e.completestatus||"配送中"===e.completestatus||"等待骑手取单"===e.completestatus}))}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(ne["b"])("shopowner",{getOrderByShopIds:"getOrderByShopIds"})),Object(ne["d"])("shopowner",{setOrderList:"SET_ORDER_LIST",updateOrder:"SET_UPDATE_ORDER_FLAG"})),{},{apiGetOrderByShopIds:function(e){for(var t=[],a=0;a<e.length;a++)this.axios.put("/shop/orderlist/"+e[a]).then((function(e){var a=e.data;a.list&&t.push.apply(t,Object(s["a"])(a.list))}));this.setOrderList(t),this.updateOrder()},updateOrderList:function(){this.apiGetOrderByShopIds(this.shopIds)}}),data:function(){return{newOrderList:[],historyOrderList:[]}}},se=ie,ce=Object(_["a"])(se,n,i,!1,null,null,null),le=ce.exports;S()(ce,{VBtn:F["a"],VCard:V["a"],VCardText:k["c"],VCardTitle:k["d"],VContainer:$["a"],VIcon:U["a"],VRow:Q["a"]});var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" 菜品管理 ")],1),a("v-card-text",[a("v-navigation-drawer",{staticStyle:{"margin-top":"100px"},attrs:{fixed:"","mobile-breakpoint":"500"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:"",nav:""}},[a("v-subheader",[e._v("店铺")]),a("v-list-item-group",{attrs:{color:"primary"},model:{value:e.shopName,callback:function(t){e.shopName=t},expression:"shopName"}},e._l(e.shops,(function(t,o){return a("v-list-item",{key:o},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1)],1)})),1)],1)],1),a("v-row",{staticClass:"food-list-items"},[a("v-col",[a("v-tabs-items",{model:{value:e.shopName,callback:function(t){e.shopName=t},expression:"shopName"}},e._l(e.shops,(function(e){return a("v-tab-item",{key:e.name},[a("ShopFoodList")],1)})),1)],1)],1)],1)],1)},ue=[],me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-app-bar",{attrs:{absolute:"",color:"blue lighten-5","scroll-target":"#scrolling-techniques-6"}},[a("v-toolbar-title",[e._v("xxxx酸菜鱼")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",large:""}},[a("v-icon",[e._v("mdi-plus")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v(" mdi-pencil ")])],1)],1),a("v-card-title",[e._v(" 11111111111111111111 ")]),a("v-card-text",[a("v-row",e._l([1,2,3,4,5,6,7,8],(function(t){return a("v-col",{key:t,attrs:{sm:6,md:3}},[a("v-card",[a("v-img",{attrs:{width:"100%",height:"100%","max-width":"300","max-height":"300",src:"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1954214095,921715647&fm=26&gp=0.jpg"}}),a("v-card-title",[e._v("单人份酸菜鱼")]),a("v-card-subtitle",[e._v("￥36")]),a("v-card-text",[a("p",[e._v("销量: 9999")]),a("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[a("v-rating",{attrs:{"background-color":"green lighten-3",color:"green","half-increments":"",size:"14",dense:"",readonly:""},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}}),a("div",{staticClass:"grey--text ml-4"},[a("span",[e._v("3.5 (6790)")])])],1)],1),a("v-card-actions",[a("v-btn",[e._v("修改")]),a("v-btn",[e._v("下架")])],1)],1)],1)})),1)],1)],1)},ve=[],pe={name:"ShopFoodList",data:function(){return{rating:3.5}}},fe=pe,he=a("1d4d"),be=Object(_["a"])(fe,me,ve,!1,null,"5736a5e0",null),ge=be.exports;S()(be,{VAppBar:A["a"],VBtn:F["a"],VCard:V["a"],VCardActions:k["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VCol:ae["a"],VIcon:U["a"],VImg:T["a"],VRating:he["a"],VRow:Q["a"],VSpacer:z["a"],VToolbarTitle:W["a"]});var _e={name:"FoodPage",components:{ShopFoodList:ge},data:function(){return{shopName:1,shops:[{name:"xxxx水煮鱼"},{name:"xxxx超市"},{name:"xxxx水果铺"}],drawer:!0}}},xe=_e,Se=(a("5766"),a("5bc1")),ye=a("1baa"),Ve=a("f774"),ke=a("c671"),Oe=a("aac8"),Ie=Object(_["a"])(xe,de,ue,!1,null,"634a33d0",null),we=Ie.exports;S()(Ie,{VAppBarNavIcon:Se["a"],VCard:V["a"],VCardText:k["c"],VCardTitle:k["d"],VCol:ae["a"],VList:q["a"],VListItem:H["a"],VListItemContent:G["a"],VListItemGroup:ye["a"],VListItemTitle:G["c"],VNavigationDrawer:Ve["a"],VRow:Q["a"],VSubheader:J["a"],VTabItem:ke["a"],VTabsItems:Oe["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v(" 店铺管理 "),a("v-btn",{attrs:{icon:"",large:""},on:{click:function(t){e.preRegisterDialog=!0}}},[a("v-icon",[e._v("mdi-plus")])],1),a("v-btn",{attrs:{icon:""},on:{click:e.refresh}},[a("v-icon",[e._v("mdi-cached")])],1)],1),a("v-card-text",[a("ShopDisplayList",{ref:"shopDisplayList"})],1),a("RegisterShopDialog",{attrs:{changeDialogStatus:e.changeDialogStatus,activeEditDialog:e.preRegisterDialog}})],1)},Te=[],De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[e._l(e.shops,(function(t){return a("v-col",{key:t.id,attrs:{sm:6,md:3}},[a("v-card",[a("v-img",{attrs:{width:"100%",height:"100%","max-width":"300","max-height":"200",src:t.logoImg}}),a("v-card-title",[e._v(e._s(t.shopname))]),a("v-card-subtitle",[e._v(e._s(t.address))]),a("v-card-text",[a("p",[e._v("主营: "+e._s(e.category[t.cateid]))]),a("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[a("v-rating",{attrs:{"background-color":"green lighten-3",color:"yellow darken-4","half-increments":"",size:"14",dense:"",readonly:""},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"item.score"}}),a("div",{staticClass:"grey--text ml-4"},[a("span",[e._v(e._s(t.score))])])],1)],1),a("v-card-actions",[a("v-btn",{on:{click:function(a){return e.intoEdit(t)}}},[e._v("修改")]),1===t.showStatus?a("v-btn",{attrs:{text:"",color:"red darken-2"},on:{click:function(a){return e.offShopStatus(t.id)}}},[e._v("关店")]):e._e(),0===t.showStatus?a("v-btn",{attrs:{text:"",color:"success"},on:{click:function(a){return e.apiRequestUpdateStatus(t.id)}}},[e._v("开店 ")]):e._e()],1)],1)],1)})),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.shopOffDialog,callback:function(t){e.shopOffDialog=t},expression:"shopOffDialog"}},[a("v-card",[a("v-card-title",[e._v("确认关店")]),a("v-card-subtitle",[a("p",[e._v("确定在营业时间关店")])]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red accent-4"},on:{click:e.commitOff}},[e._v("确认")]),a("v-btn",{attrs:{text:"",color:"brown darken-4"},on:{click:function(t){e.shopOffDialog=!1}}},[e._v("取消")])],1)],1)],1),a("EditShopDialog",{attrs:{shop:e.editingShop,changeDialogStatus:e.changeDialogStatus,activeEditDialog:e.activeEditDialog}}),a("v-snackbar",{attrs:{centered:"",color:"success"},model:{value:e.successControl,callback:function(t){e.successControl=t},expression:"successControl"}},[a("v-alert",{attrs:{type:"success"}},[e._v(" 操作成功 ")])],1),a("v-snackbar",{attrs:{centered:"",color:"info"},model:{value:e.failedControl,callback:function(t){e.failedControl=t},expression:"failedControl"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 操作失败 ")])],1)],2)},Re=[],Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.activeEditDialog,callback:function(t){e.activeEditDialog=t},expression:"activeEditDialog"}},[a("v-form",[a("v-card",[a("v-app-bar",[a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:function(t){return e.changeDialogStatus()}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v(e._s(e.shop.shopname))]),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:e.commitUpdate}},[a("v-icon",[e._v("mdi-content-save")])],1)],1),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("可直接修改部分")]),a("v-list-item",[a("v-text-field",{attrs:{label:"公告","prepend-inner-icon":"mdi-clipboard-outline",counter:50},model:{value:e.cachedShop.notice,callback:function(t){e.$set(e.cachedShop,"notice",t)},expression:"cachedShop.notice"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"商家电话号码","prepend-inner-icon":"mdi-cellphone-basic",counter:11},model:{value:e.cachedShop.mobile,callback:function(t){e.$set(e.cachedShop,"mobile",t)},expression:"cachedShop.mobile"}})],1),a("v-list-item",[a("v-menu",{ref:"startTimeMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.cachedShop.beginTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.cachedShop,"beginTime",t)},"update:return-value":function(t){return e.$set(e.cachedShop,"beginTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"开店时间","prepend-inner-icon":"mdi-clock-time-four-outline",readonly:""},model:{value:e.cachedShop.beginTime,callback:function(t){e.$set(e.cachedShop,"beginTime",t)},expression:"cachedShop.beginTime"}},"v-text-field",r,!1),o))]}}]),model:{value:e.timePickerStart,callback:function(t){e.timePickerStart=t},expression:"timePickerStart"}},[e.timePickerStart?a("v-time-picker",{attrs:{"full-width":"",format:"24hr","ampm-in-title":"","use-seconds":""},model:{value:e.cachedShop.beginTime,callback:function(t){e.$set(e.cachedShop,"beginTime",t)},expression:"cachedShop.beginTime"}},[a("v-btn",{attrs:{text:"",color:"blue"},on:{click:function(t){return e.$refs.startTimeMenu.save(e.cachedShop.beginTime)}}},[e._v("确定 ")]),a("v-btn",{attrs:{text:"",color:"grey"},on:{click:function(t){e.timePickerEnd=!1}}},[e._v("取消")])],1):e._e()],1)],1),a("v-list-item",[a("v-menu",{ref:"endTimeMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.cachedShop.endTime,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.cachedShop,"endTime",t)},"update:return-value":function(t){return e.$set(e.cachedShop,"endTime",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"关店时间","prepend-inner-icon":"mdi-clock-time-four-outline",readonly:""},model:{value:e.cachedShop.endTime,callback:function(t){e.$set(e.cachedShop,"endTime",t)},expression:"cachedShop.endTime"}},"v-text-field",r,!1),o))]}}]),model:{value:e.timePickerEnd,callback:function(t){e.timePickerEnd=t},expression:"timePickerEnd"}},[e.timePickerEnd?a("v-time-picker",{attrs:{"full-width":"",format:"24hr","ampm-in-title":"","use-seconds":""},model:{value:e.cachedShop.endTime,callback:function(t){e.$set(e.cachedShop,"endTime",t)},expression:"cachedShop.endTime"}},[a("v-btn",{attrs:{text:"",color:"blue"},on:{click:function(t){return e.$refs.endTimeMenu.save(e.cachedShop.endTime)}}},[e._v("确定 ")]),a("v-btn",{attrs:{text:"",color:"grey"},on:{click:function(t){e.timePickerEnd=!1}}},[e._v("取消")])],1):e._e()],1)],1),a("v-list-item",[a("v-text-field",{attrs:{label:"运送时长","prepend-inner-icon":"mdi-av-timer",counter:2,suffix:"分钟"},model:{value:e.cachedShop.sendTime,callback:function(t){e.$set(e.cachedShop,"sendTime",t)},expression:"cachedShop.sendTime"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"起送价","prepend-inner-icon":"mdi-source-commit-start",prefix:"￥"},model:{value:e.cachedShop.floorSendCost,callback:function(t){e.$set(e.cachedShop,"floorSendCost",t)},expression:"cachedShop.floorSendCost"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"包装费","prepend-inner-icon":"mdi-package-variant",prefix:"￥"},model:{value:e.cachedShop.boxCost,callback:function(t){e.$set(e.cachedShop,"boxCost",t)},expression:"cachedShop.boxCost"}})],1),a("v-subheader",[e._v("需审核部分")]),a("v-list-item",[a("v-text-field",{attrs:{label:"店铺名","prepend-inner-icon":"mdi-store",counter:15},model:{value:e.cachedShop.shopname,callback:function(t){e.$set(e.cachedShop,"shopname",t)},expression:"cachedShop.shopname"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"地址","prepend-inner-icon":"mdi-office-building-marker-outline",counter:30},model:{value:e.cachedShop.address,callback:function(t){e.$set(e.cachedShop,"address",t)},expression:"cachedShop.address"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"商家logo图片URL",rules:[function(e){return!!e||"需要输入url"}],clearable:""},model:{value:e.cachedShop.logoImg,callback:function(t){e.$set(e.cachedShop,"logoImg",t)},expression:"cachedShop.logoImg"}})],1),a("v-subheader",[e._v("不可修改部分")]),a("v-list",{attrs:{"three-line":""}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v("联系人")]),a("v-list-item-subtitle",[e._v(e._s(e.shop.contactMan))])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v("联系电话")]),a("v-list-item-subtitle",[e._v(e._s(e.shop.contactMobile))])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v("营业执照")]),a("v-list-item-subtitle",[a("v-img",{attrs:{src:e.shop.permitImg}})],1)],1)],1)],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{top:"",color:"success"},model:{value:e.successSaved,callback:function(t){e.successSaved=t},expression:"successSaved"}},[a("v-alert",{attrs:{type:"success"}},[e._v(" 保存成功 ")])],1),a("v-snackbar",{attrs:{top:"",color:"info"},model:{value:e.failedSaved,callback:function(t){e.failedSaved=t},expression:"failedSaved"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 保存失败，请检查网络 ")])],1)],1)},je=[],Ee={name:"EditShopDialog",props:["activeEditDialog","changeDialogStatus","shop"],data:function(){return{cachedShop:{},activeEditDialogTest:!0,timePickerStart:!1,timePickerEnd:!1,successSaved:!1,failedSaved:!1}},methods:Object(c["a"])({commitUpdate:function(){var e=this;this.axios({method:"post",url:"/shopinfo/update",data:this.cachedShop,headers:{"content-type":"application/json"}}).then((function(t){0===t.data.code&&(e.setShopByShopId({shop:e.cachedShop,id:e.shop.id}),e.successSaved=!0,e.changeDialogStatus())})).catch((function(){e.failedSaved=!0}))}},Object(ne["d"])("validate",{setShopByShopId:"SET_SHOP_BY_SHOP_ID"})),watch:{activeEditDialog:function(e){e||(this.cachedShop=Object(c["a"])({},this.shop))},shop:function(){this.cachedShop=Object(c["a"])({},this.shop)}},mounted:function(){}},Pe=Ee,Ae=a("e449"),Fe=a("c964"),Be=Object(_["a"])(Pe,Le,je,!1,null,"78c0b722",null),$e=Be.exports;S()(Be,{VAlert:P["a"],VAppBar:A["a"],VBtn:F["a"],VCard:V["a"],VContainer:$["a"],VDialog:N["a"],VForm:M["a"],VIcon:U["a"],VImg:T["a"],VList:q["a"],VListItem:H["a"],VListItemContent:G["a"],VListItemSubtitle:G["b"],VListItemTitle:G["c"],VMenu:Ae["a"],VSnackbar:Y["a"],VSpacer:z["a"],VSubheader:J["a"],VTextField:K["a"],VTimePicker:Fe["a"],VToolbarTitle:W["a"]});var Ne={name:"ShopDisplayList",components:{EditShopDialog:$e},data:function(){return{category:["未分类","饮品","简餐","商超","果蔬"],activeEditDialog:!1,editingShop:[],successControl:!1,failedControl:!1,shopOffDialog:!1,handlingShopId:null}},computed:Object(c["a"])({},Object(ne["c"])("validate",{shops:"shops",userInfo:"userInfo"})),methods:Object(c["a"])(Object(c["a"])({},Object(ne["d"])("validate",{setShopList:"SET_SHOP_LIST"})),{},{changeDialogStatus:function(){this.activeEditDialog=!this.activeEditDialog},intoEdit:function(e){this.activeEditDialog=!0,this.editingShop=e},apiRequestUpdateStatus:function(e){var t=this;this.axios.get("/shopinfo/updatestatus/"+e).then((function(e){0===e.data.code&&(t.successControl=!0,t.refreshShop())})).catch((function(){return t.failedControl=!0}))},offShopStatus:function(e){this.handlingShopId=e,this.shopOffDialog=!0},commitOff:function(){this.apiRequestUpdateStatus(this.handlingShopId),this.shopOffDialog=!1},apiGetShopList:function(e){var t=this;this.axios.get("/shopinfo/list/"+e).then((function(e){var a=e.data;402!==a.code&&403!==a.code&&t.setShopList(a.list)})).catch((function(){t.failedControl=!0}))},refreshShop:function(){var e=this.apiGetShopList(this.userInfo.id);this.setShopList(e)}})},Me=Ne,Ue=Object(_["a"])(Me,De,Re,!1,null,null,null),qe=Ue.exports;S()(Ue,{VAlert:P["a"],VBtn:F["a"],VCard:V["a"],VCardActions:k["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VCol:ae["a"],VDialog:N["a"],VImg:T["a"],VRating:he["a"],VRow:Q["a"],VSnackbar:Y["a"]});var He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.activeEditDialog,callback:function(t){e.activeEditDialog=t},expression:"activeEditDialog"}},[a("v-form",{ref:"submitForm"},[a("v-card",[a("v-app-bar",[a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:e.changeDialogStatus}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v("开店申请")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:e.commitRegister}},[a("v-icon",[e._v("mdi-content-save")])],1)],1),a("v-list",{attrs:{subheader:""}},[a("v-list-item",[a("v-text-field",{attrs:{label:"店铺名",counter:15,rules:[function(e){return!!e||"店铺名不能为空"}]},model:{value:e.register.shopname,callback:function(t){e.$set(e.register,"shopname",t)},expression:"register.shopname"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"地址",counter:25,rules:[function(e){return!!e||"地址不能为空"}]},model:{value:e.register.adress,callback:function(t){e.$set(e.register,"adress",t)},expression:"register.adress"}})],1),a("v-list-item",[a("v-radio-group",{attrs:{row:"",label:"店铺品类"},model:{value:e.register.cateid,callback:function(t){e.$set(e.register,"cateid",t)},expression:"register.cateid"}},[a("v-radio",{attrs:{label:"饮品",value:1}}),a("v-radio",{attrs:{label:"简餐",value:2}}),a("v-radio",{attrs:{label:"商超",value:3}}),a("v-radio",{attrs:{label:"果蔬",value:4}})],1)],1),a("v-subheader",[e._v("可选部分")]),a("v-list-item",[a("v-text-field",{attrs:{label:"许可证URL"},model:{value:e.register.permitImg,callback:function(t){e.$set(e.register,"permitImg",t)},expression:"register.permitImg"}})],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{top:"",color:"success"},model:{value:e.successSaved,callback:function(t){e.successSaved=t},expression:"successSaved"}},[a("v-alert",{attrs:{type:"success"}},[e._v(" 发起成功 ")])],1),a("v-snackbar",{attrs:{top:"",color:"info"},model:{value:e.failedSaved,callback:function(t){e.failedSaved=t},expression:"failedSaved"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 发起申请失败，请检查网络 ")])],1)],1)},Ge=[],Qe={name:"RegisterShopDialog",props:["activeEditDialog","changeDialogStatus"],data:function(){return{register:{shopownerId:null,cateid:2,shopname:"",adress:"",permitImg:null,images:null},activeEditDialogTest:!0,timePickerStart:!1,timePickerEnd:!1,successSaved:!1,failedSaved:!1,exampleShopregister:{shopownerId:2,cateid:1,shopname:"张记早点铺",adress:"天河区迎龙路225号"}}},methods:Object(c["a"])({commitRegister:function(){var e=this;this.$refs.submitForm.validate()&&(this.register.shopownerId=this.userInfo.id,""===this.register.images&&(this.register.images=null),""===this.register.permitImg&&(this.register.permitImg=null),console.log(this.register),this.axios({method:"post",url:"/shopregister/save",data:this.register,headers:{"content-type":"application/json"}}).then((function(t){0===t.data.code&&(e.successSaved=!0,e.changeDialogStatus())})).catch((function(){e.failedSaved=!0})))}},Object(ne["d"])("validate",{setShopByShopId:"SET_SHOP_BY_SHOP_ID"})),computed:Object(c["a"])({},Object(ne["c"])("validate",{userInfo:"userInfo"})),watch:{},mounted:function(){}},Ye=Qe,ze=a("67b6"),Je=a("43a6"),Ke=Object(_["a"])(Ye,He,Ge,!1,null,"1688cb74",null),We=Ke.exports;S()(Ke,{VAlert:P["a"],VAppBar:A["a"],VBtn:F["a"],VCard:V["a"],VContainer:$["a"],VDialog:N["a"],VForm:M["a"],VIcon:U["a"],VList:q["a"],VListItem:H["a"],VRadio:ze["a"],VRadioGroup:Je["a"],VSnackbar:Y["a"],VSpacer:z["a"],VSubheader:J["a"],VTextField:K["a"],VToolbarTitle:W["a"]});var Xe={name:"ShopPage",components:{ShopDisplayList:qe,RegisterShopDialog:We},data:function(){return{preRegisterDialog:!1}},methods:{refresh:function(){this.$refs.shopDisplayList.refreshShop()},changeDialogStatus:function(){this.preRegisterDialog=!this.preRegisterDialog}}},Ze=Xe,et=Object(_["a"])(Ze,Ce,Te,!1,null,null,null),tt=et.exports;S()(et,{VBtn:F["a"],VCard:V["a"],VCardText:k["c"],VCardTitle:k["d"],VIcon:U["a"]});var at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("退款列表 "),a("v-btn",{attrs:{icon:""},on:{click:e.apiRequestRefundQueue}},[a("v-icon",[e._v("mdi-cached")])],1)],1),a("v-container",[a("v-row",[a("v-card-title",[a("h5",[e._v("待处理")])]),a("v-card-text",[a("RefundList",{attrs:{refresh:e.apiRequestRefundQueue,"refund-list":e.refundQueueList}})],1)],1)],1),a("v-snackbar",{attrs:{color:"info"},model:{value:e.errorBarDisplay,callback:function(t){e.errorBarDisplay=t},expression:"errorBarDisplay"}},[a("span",[e._v("获取退款列表失败")])])],1)},ot=[],rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",e._l(e.refundList,(function(t){return a("v-col",{key:t.id,attrs:{md:6}},[a("v-card",[a("OrderItem",{attrs:{refresh:e.refresh,item:t,"have-control":!0}})],1)],1)})),1)},nt=[],it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-title",[e._v(e._s("#"+e.item.orderId))]),a("v-card-subtitle",[e._v(e._s(e.modifiedTime(new Date(e.item.gmtCreate))))]),a("v-card-text",[a("OrderFoodTable",{ref:"foodTable",attrs:{item:e.item}}),a("v-container",[a("v-row",[e._v(e._s(e.getDate(new Date(e.item.gmtCreate))))])],1)],1),a("v-card-actions",[e.haveControl?a("v-btn",{attrs:{color:"#ff3333"},on:{click:e.createRefundFromShopowner}},[a("span",{staticStyle:{color:"#ebebeb"}},[e._v("选择性退款")])]):e._e(),e.haveControl?a("v-btn",{attrs:{color:"blue"},on:{click:e.createAllRefund}},[a("span",{staticStyle:{color:"#ebebeb"}},[e._v("一键退单")])]):e._e()],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.activeRefundDialog,callback:function(t){e.activeRefundDialog=t},expression:"activeRefundDialog"}},[a("v-form",[a("v-card",[a("v-app-bar",[a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:function(t){e.activeRefundDialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v("常规订单退款")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:e.beforeCommitUpdate}},[a("v-icon",[e._v("mdi-content-save")])],1)],1),a("v-list",{attrs:{subheader:""}},[a("v-subheader",[e._v("退款菜品")]),a("v-list-item",[a("v-list-item-content",[a("span",{staticStyle:{color:"green"}},[e._v('!!!要退单必须用"一键退单"按钮。'),a("span",{staticStyle:{color:"red"}},[e._v("本对话框操作不改动订单状态")]),a("br"),e._v("用法: 勾选菜品+填入份数")])])],1),a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[a("v-checkbox",{attrs:{indeterminate:e.selectAllIndeterminate},model:{value:e.selectedAll,callback:function(t){e.selectedAll=t},expression:"selectedAll"}})],1),a("th"),a("th",{staticClass:"text-left"},[e._v(" 菜品 ")]),a("th",{staticClass:"text-left",staticStyle:{color:"red"}},[e._v(" 退款份数 ")]),a("th",{staticClass:"text-left"},[e._v(" 原份数 ")]),a("th",[e._v("单价")]),a("th",[e._v("原价")])])]),a("tbody",e._l(e.$refs.foodTable.foods,(function(t,o){return a("tr",{key:o},[a("td",[a("v-checkbox",{attrs:{value:t},model:{value:e.selectItems,callback:function(t){e.selectItems=t},expression:"selectItems"}})],1),a("td",[a("v-img",{attrs:{src:t.cover,"max-width":"40","max-height":"40"}})],1),a("td",[e._v(e._s(t.title))]),a("td",[a("v-text-field",{attrs:{rules:[function(e){return e>0&&e<=t.numbers&&!!e||"请输入不大于原份数的正整值"}],type:"number"},model:{value:t.refundNumbers,callback:function(a){e.$set(t,"refundNumbers",a)},expression:"item.refundNumbers"}})],1),a("td",[e._v(e._s(t.numbers))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.sellPrice)))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.originPrice)))])])})),0)]},proxy:!0}])}),a("v-list-item",[a("v-list-item-content",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-file-document-edit-outline",label:"退款原因",clearable:"",counter:50},model:{value:e.item.refundReason,callback:function(t){e.$set(e.item,"refundReason",t)},expression:"item.refundReason"}})],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.reConfirmDialog,callback:function(t){e.reConfirmDialog=t},expression:"reConfirmDialog"}},[a("v-card",[a("v-card-title",[e._v("确认退款")]),a("v-card-subtitle",[e._v(" 即将退款"),a("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(e.twoDecimal(this.item.payMoney)))]),e._v("退款操作无法恢复 ")]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red accent-4"},on:{click:e.commitUpdate}},[e._v("确认")]),a("v-btn",{attrs:{text:"",color:"brown darken-4"},on:{click:function(t){e.reConfirmDialog=!1}}},[e._v("取消")])],1)],1)],1),a("v-snackbar",{attrs:{top:"",color:"success"},model:{value:e.successRefund,callback:function(t){e.successRefund=t},expression:"successRefund"}},[a("v-alert",{attrs:{type:"success"}},[e._v(" 退款成功 ")])],1),a("v-snackbar",{attrs:{top:"",color:"info"},model:{value:e.failedRefund,callback:function(t){e.failedRefund=t},expression:"failedRefund"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 退款失败 ")])],1),a("v-snackbar",{attrs:{top:"",color:"info"},model:{value:e.noControlRefund,callback:function(t){e.noControlRefund=t},expression:"noControlRefund"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 退款未生成，退款金额为￥0.00 ")])],1)],1)},st=[],ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panels",[a("v-card",[a("v-expansion-panel",[a("v-expansion-panel-header",[a("v-banner",[e._v(" 总价：￥"+e._s(e.twoDecimal(e.order.totalMoney))+" ")])],1),a("v-expansion-panel-content",[e._v(" 状态："+e._s(e.order.completestatus)+" "),a("v-banner",[e._v(" 备注： "+e._s(e.order.note)+" ")]),a("v-banner",[e._v("地址："+e._s(e.order.userAddress))]),a("v-card-title",[a("v-banner",[e._v(e._s(e.order.userUsername))])],1),a("v-card-subtitle",[a("v-banner",[e._v(e._s(e.order.userMobile))])],1),a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th"),a("th",{staticClass:"text-left"},[e._v(" 菜品 ")]),a("th",{staticClass:"text-left"},[e._v(" 份数 ")]),a("th",[e._v("单价")]),a("th",[e._v("原价")])])]),a("tbody",e._l(e.foods,(function(t,o){return a("tr",{key:o},[a("td",[a("v-img",{attrs:{src:t.cover,"max-width":"40","max-height":"40"}})],1),a("td",[e._v(e._s(t.title))]),a("td",[e._v(e._s(t.numbers))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.sellPrice)))]),a("td",[e._v("￥"+e._s(e.twoDecimal(t.originPrice)))])])})),0)]},proxy:!0}])})],1)],1)],1)],1)},lt=[],dt={name:"OrderFoodTable",props:["item"],data:function(){return{foods:[],order:{}}},methods:{twoDecimal:function(e){return h(e)},apiRequestGetFoodsByOrderId:function(){var e=this,t=this.item.orderId;this.axios.get("/orderfood/"+t).then((function(t){e.foods=t.data.list}))},apiRequestOrderByOrderId:function(){var e=this,t=this.item.orderId;this.axios.get("/orderdetail/info/"+t).then((function(t){e.order=t.data.orderDetail}))}},mounted:function(){this.apiRequestOrderByOrderId(),this.apiRequestGetFoodsByOrderId()}},ut=dt,mt=Object(_["a"])(ut,ct,lt,!1,null,"a460d852",null),vt=mt.exports;S()(mt,{VBanner:y["a"],VCard:V["a"],VCardSubtitle:k["b"],VCardTitle:k["d"],VExpansionPanel:O["a"],VExpansionPanelContent:I["a"],VExpansionPanelHeader:w["a"],VExpansionPanels:C["a"],VImg:T["a"],VSimpleTable:D["a"]});var pt={name:"OrderItem",components:{OrderFoodTable:vt},props:{haveControl:{},item:{type:Object},refresh:{type:Function}},data:function(){return{activeRefundDialog:!1,selectItems:[],selectedAll:!1,selectAllIndeterminate:!1,reConfirmDialog:!1,haveNoNumberItem:!1,successRefund:!1,failedRefund:!1,noControlRefund:!1}},watch:{selectedAll:function(e){console.log("watched ====>"+e),e?(console.log("watched ====>"+e),this.selectItems=Object(s["a"])(this.$refs.foodTable.foods),this.selectAllIndeterminate=!1):(console.log("watched ====>"+e),this.selectItems=[],this.selectAllIndeterminate=!1)},selectItems:function(){console.log("watched select item change===="),this.selectAllIndeterminate=this.selectItems.length>0&&this.selectItems.length<this.$refs.foodTable.foods.length,0===this.selectItems.length&&(this.selectedAll=!1),this.selectItems.length===this.$refs.foodTable.foods.length&&(this.selectedAll=!0)}},methods:{modifiedTime:function(e){return f("HH:MM",e)},getDate:function(e){return f("mm月dd日",e)},twoDecimal:function(e){return h(e)},createRefundFromShopowner:function(){this.activeRefundDialog=!0},commitUpdate:function(){var e=this;if(0===this.item.payMoney)return this.noControlRefund=!0,void(this.reConfirmDialog=!1);this.axios({method:"post",url:"/orderrefund/save",data:this.item,headers:{"content-type":"application/json"}}).then((function(t){0===t.data.code&&(e.successRefund=!0,e.reConfirmDialog=!1,e.activeRefundDialog=!1,e.refresh())})).catch((function(){e.failedRefund=!0,e.refresh()}))},beforeCommitUpdate:function(){this.reConfirmDialog=!0;for(var e=0,t=0,a=0;a<this.selectItems.length;a++){var o=this.selectItems[a].sellPrice*this.selectItems[a].refundNumbers;o&&(e+=o),console.log("isNaN(res)===>"+isNaN(o)),isNaN(o)&&t++}this.item.payMoney=e,this.haveNoNumberItem=t>0},createAllRefund:function(){this.reConfirmDialog=!0,this.item.payMoney=this.$refs.foodTable.order.totalMoney}},mounted:function(){}},ft=pt,ht=Object(_["a"])(ft,it,st,!1,null,null,null),bt=ht.exports;S()(ht,{VAlert:P["a"],VAppBar:A["a"],VBtn:F["a"],VCard:V["a"],VCardActions:k["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VCheckbox:B["a"],VContainer:$["a"],VDialog:N["a"],VForm:M["a"],VIcon:U["a"],VImg:T["a"],VList:q["a"],VListItem:H["a"],VListItemContent:G["a"],VRow:Q["a"],VSimpleTable:D["a"],VSnackbar:Y["a"],VSpacer:z["a"],VSubheader:J["a"],VTextField:K["a"],VToolbarTitle:W["a"]});var gt={name:"OrderList",components:{OrderItem:bt},props:["refundList","haveControl","refresh"]},_t=gt,xt=Object(_["a"])(_t,rt,nt,!1,null,null,null),St=xt.exports;S()(xt,{VCard:V["a"],VCol:ae["a"],VRow:Q["a"]});var yt={name:"RefundPage",components:{RefundList:St},methods:{apiRequestRefundQueue:function(){var e=this;this.axios.get("/orderrefund/refundlist/"+this.userInfo.id).then((function(t){0===t.data.code?e.refundQueueList=t.data.list:e.errorBarDisplay=!0}))}},computed:Object(c["a"])({},Object(ne["c"])("validate",{userInfo:"userInfo",shopIds:"shopIds"})),data:function(){return{errorBarDisplay:!1,refundQueueList:[],exampleQueueList:[{id:2,orderId:"108",userId:2,username:"渣渣龟",payMoney:30,refundReason:"",serviceCost:.1,completestatus:0,gmtCreate:"2020-11-12 16:48:11",gmtModified:"2020-11-12 16:48:11"}]}},mounted:function(){this.apiRequestRefundQueue()}},Vt=yt,kt=Object(_["a"])(Vt,at,ot,!1,null,"04165746",null),Ot=kt.exports;S()(kt,{VBtn:F["a"],VCard:V["a"],VCardText:k["c"],VCardTitle:k["d"],VContainer:$["a"],VIcon:U["a"],VRow:Q["a"],VSnackbar:Y["a"]});var It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("推广列表 "),a("v-btn",{attrs:{icon:""},on:{click:e.apiRequestPromoteList}},[a("v-icon",[e._v("mdi-cached")])],1),a("v-btn",{attrs:{icon:"",large:""},on:{click:function(t){e.activeAddPromote=!0}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),a("v-card-subtitle",[e._v("目前平台所有推广")]),a("v-card-text",[a("v-row",e._l(e.promoteList,(function(e){return a("PromoteItem",{key:e.id,attrs:{promote:e}})})),1)],1),a("v-snackbar",{attrs:{color:"info"},model:{value:e.errorBarDisplay,callback:function(t){e.errorBarDisplay=t},expression:"errorBarDisplay"}},[a("span",[e._v("获取推广状态失败")])]),a("v-snackbar",{attrs:{top:"",color:"success"},model:{value:e.successApply,callback:function(t){e.successApply=t},expression:"successApply"}},[a("v-alert",{attrs:{type:"success"}},[e._v(" 申请发起成功 ")])],1),a("v-snackbar",{attrs:{top:"",color:"info"},model:{value:e.failApply,callback:function(t){e.failApply=t},expression:"failApply"}},[a("v-alert",{attrs:{type:"info"}},[e._v(" 申请发起失败 ")])],1),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.activeAddPromote,callback:function(t){e.activeAddPromote=t},expression:"activeAddPromote"}},[a("v-form",[a("v-card",[a("v-app-bar",[a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:function(t){e.activeAddPromote=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v("申请推广")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:e.apiRequestCreatePromote}},[a("v-icon",[e._v("mdi-content-save")])],1)],1),a("v-list",[a("v-list-item",[a("v-radio-group",{attrs:{row:"",label:"店铺品类"},model:{value:e.promoteCreateForm.shopId,callback:function(t){e.$set(e.promoteCreateForm,"shopId",t)},expression:"promoteCreateForm.shopId"}},e._l(e.shops,(function(e){return a("v-radio",{key:e.id,attrs:{label:e.shopname,value:e.id}})})),1)],1),a("v-list-item",[a("v-text-field",{attrs:{label:"申请时长",type:"number",suffix:"天"},model:{value:e.promoteCreateForm.applayTime,callback:function(t){e.$set(e.promoteCreateForm,"applayTime",t)},expression:"promoteCreateForm.applayTime"}})],1),a("v-list-item",[a("v-text-field",{attrs:{label:"期望申请费用",type:"number",prefix:"￥"},model:{value:e.promoteCreateForm.willingpay,callback:function(t){e.$set(e.promoteCreateForm,"willingpay",t)},expression:"promoteCreateForm.willingpay"}})],1)],1)],1)],1)],1)],1)},wt=[],Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{attrs:{md:4}},[a("v-card",[a("v-card-title",[e._v(e._s(e.shopInfo.shopname))]),a("v-card-text",[e._v("推广时间："+e._s(e.promote.applayTime)+"天")]),a("v-card-text",[e._v("推广状态："+e._s(e.promote.promoteStatus))]),a("v-card-text",[e._v("开始时间："+e._s(e.getDate(new Date(e.promote.gmtCreate))))])],1)],1)},Tt=[],Dt={name:"PromoteItem",props:["promote"],data:function(){return{shopInfo:{}}},created:function(){this.apiRequestShopId()},methods:{modifiedTime:function(e){return f("HH:MM",e)},getDate:function(e){return f("mm月dd日",e)},apiRequestShopId:function(){var e=this;this.axios.get("/shopinfo/info/"+this.promote.shopId).then((function(t){e.shopInfo=t.data.shopInfo}))}}},Rt=Dt,Lt=Object(_["a"])(Rt,Ct,Tt,!1,null,null,null),jt=Lt.exports;S()(Lt,{VCard:V["a"],VCardText:k["c"],VCardTitle:k["d"],VCol:ae["a"]});var Et={name:"InfoPage",components:{PromoteItem:jt},methods:{apiRequestPromoteList:function(){var e=this;this.axios.get("/promote/list").then((function(t){e.promoteList=t.data.list})).catch((function(){return e.errorBarDisplay=!1}))},apiRequestCreatePromote:function(){var e=this;this.axios({method:"post",url:"/promoteapplay/save",data:this.promoteCreateForm,headers:{"content-type":"application/json"}}).then((function(t){0===t.data.code?(e.successApply=!0,e.activeAddPromote=!1):(e.failApply=!0,e.activeAddPromote=!1)})).catch((function(){e.failApply=!0,e.activeAddPromote=!1}))}},data:function(){return{promoteList:[],errorBarDisplay:!1,activeAddPromote:!1,successApply:!1,failApply:!1,example:{id:14,shopId:12,applayTime:111,startPromote:"2020-11-13 00:00:00",promoteStatus:"推广中",gmtCreate:"2020-11-13 07:58:56",gmtModified:"2020-11-13 07:59:02"},exampleForm:{applayStatus:"string",applayTime:0,shopId:0,willingpay:0},promoteCreateForm:{applayTime:5,shopId:null,willingpay:500}}},computed:Object(c["a"])({},Object(ne["c"])("validate",{userInfo:"userInfo",shops:"shops"})),mounted:function(){this.apiRequestPromoteList()}},Pt=Et,At=Object(_["a"])(Pt,It,wt,!1,null,null,null),Ft=At.exports;S()(At,{VAlert:P["a"],VAppBar:A["a"],VBtn:F["a"],VCard:V["a"],VCardSubtitle:k["b"],VCardText:k["c"],VCardTitle:k["d"],VDialog:N["a"],VForm:M["a"],VIcon:U["a"],VList:q["a"],VListItem:H["a"],VRadio:ze["a"],VRadioGroup:Je["a"],VRow:Q["a"],VSnackbar:Y["a"],VSpacer:z["a"],VTextField:K["a"],VToolbarTitle:W["a"]});var Bt={name:"Home",components:{InfoPage:Ft,RefundPage:Ot,ShopPage:tt,FoodPage:we,OrderPage:le},data:function(){return{tab:"",text:"balabala",items:["订单","菜品","店铺","退款","商家中心"]}},methods:{logout:function(){window.localStorage.removeItem("uid"),this.$router.replace("/login")}}},$t=Bt,Nt=a("71a3"),Mt=a("fe57"),Ut=Object(_["a"])($t,o,r,!1,null,"6caacf8c",null),qt=Ut.exports;S()(Ut,{VBtn:F["a"],VCard:V["a"],VTab:Nt["a"],VTabItem:ke["a"],VTabs:Mt["a"],VTabsItems:Oe["a"]});var Ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("商家登录")]),a("v-card-text",[[a("v-form",{ref:"form",on:{submit:e.loginAndValidate}},[a("v-container",[a("v-row",[a("v-col",{attrs:{"offset-sm":3,"offset-md":3,sm:6,md:6}},[a("v-text-field",{attrs:{rules:e.notEmptyUserName,label:"用户名",required:"",clearable:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),a("v-row",[a("v-col",{attrs:{"offset-sm":3,"offset-md":3,sm:6,md:6}},[a("v-text-field",{attrs:{rules:e.notEmptyPassword,type:"password",label:"密码",required:"",clearable:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-row",[a("v-col",{attrs:{"offset-sm":3,"offset-md":3,sm:6,md:6}},[a("v-checkbox",{attrs:{label:"自动登录"},model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}})],1)],1),a("v-row",[a("v-col",{attrs:{"offset-sm":3,"offset-md":3,sm:3,md:3}},[a("v-btn",{attrs:{color:"success",type:"submit"}},[e._v("登录")])],1)],1)],1)],1)]],2)],1)},Gt=[],Qt={name:"Login",data:function(){return{valid:!1,username:"",password:"",rememberMe:!0,notEmptyUserName:[function(e){return!!e||"用户名不能为空"}],notEmptyPassword:[function(e){return!!e||"密码不能为空"}]}},methods:Object(c["a"])({loginAndValidate:function(){this.$refs.form.validate()&&(this.userLogin({username:this.username,password:this.password,"remember-me":this.rememberMe}),this.$router.push("/home"),setTimeout(this.successAndReloadApp,2e3))},successAndReloadApp:function(){location.reload()}},Object(ne["b"])("validate",{userLogin:"userLogin"}))},Yt=Qt,zt=Object(_["a"])(Yt,Ht,Gt,!1,null,"5b688a55",null),Jt=zt.exports;S()(zt,{VBtn:F["a"],VCard:V["a"],VCardText:k["c"],VCardTitle:k["d"],VCheckbox:B["a"],VCol:ae["a"],VContainer:$["a"],VForm:M["a"],VRow:Q["a"],VTextField:K["a"]});t["default"]=[{path:"/home",component:qt,name:"Home"},{path:"/login",component:Jt}]},f761:function(e,t,a){"use strict";a.r(t);a("99af"),a("4160"),a("d3b7"),a("159b"),a("ddb0");var o=a("58bb"),r=[];o.keys().forEach((function(e){"./index.js"!==e&&(r=r.concat(o(e).default))})),t["default"]=r}});
//# sourceMappingURL=app.b374b359.js.map